{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\header\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\header\\index.vue","mtime":1605531714304},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge21hcE11dGF0aW9uc30gZnJvbSAndnVleCcNCmltcG9ydCBTZWFyY2hJbnB1dCBmcm9tICcuLi9jb21tb24vaW5wdXQnDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKXsNCiAgICByZXR1cm57DQogICAgICB1cmw6ICcnLA0KICAgICAgc2VhcmNoOiAnJywNCiAgICAgIGlkOiAnJywNCiAgICB9DQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBTZWFyY2hJbnB1dCwNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBzdGF0dXM6IHsNCiAgICAgIGdldCgpew0KICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc3RhdHVzDQogICAgICB9LA0KICAgICAgc2V0KCl7fQ0KICAgIH0sDQogIH0sDQoNCg0KICBtb3VudGVkKCl7DQogICAgdGhpcy5pbml0KCk7DQogIH0sDQoNCiAgbWV0aG9kczp7DQogICAgLi4ubWFwTXV0YXRpb25zKFsnQ0hBTkdFX1NUQVRVUyddKSwNCg0KICAgIGluaXQoKXsNCiAgICAgIHRoaXMuQ29va2llKCk7DQogICAgfSwNCiAgICANCiAgICAvLyDpgIDlh7rnmbvlvZUNCiAgICBhc3luYyBMb2dvdXQoKXsNCiAgICAgIGF3YWl0IHRoaXMuJGFwaS5Mb2dvdXQoKQ0KICAgICAgICAudGhlbiggKCkgPT4gew0KICAgICAgICAgIHRoaXMuQ0hBTkdFX1NUQVRVUyhmYWxzZSk7DQogICAgICAgICAgdGhpcy4kcm91dGUucGF0aCAhPT0gJy9ob21lJyAmJiB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9ob21lJ30pDQogICAgICAgIH0pDQogICAgfSwNCg0KICAgIC8vIOiOt+WPlueZu+mZhueKtuaAgQ0KICAgIGFzeW5jIFN0YXR1cyhmbGFnKXsNCiAgICAgIGZsYWcgJiYgDQogICAgICBhd2FpdCB0aGlzLiRhcGkuTG9naW5TdGF0dXMoKQ0KICAgICAgLnRoZW4oIHJlcyA9PiB7IA0KICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLnByb2ZpbGU7DQogICAgICAgIHRoaXMudXJsID0gZGF0YS5hdmF0YXJVcmw7DQogICAgICAgIHRoaXMuaWQgPSBkYXRhLnVzZXJJZDsNCiAgICAgICAgY29uc29sZS5sb2cocmVzKQ0KICAgICAgfSkNCiAgICAgIC5jYXRjaCggKCkgPT4gew0KICAgICAgICByZXR1cm47DQogICAgICB9KQ0KICAgICAgdGhpcy5DSEFOR0VfU1RBVFVTKGZsYWcpOw0KICAgIH0sDQoNCiAgICAvLyDmn6XnnItjb29raWUNCiAgICBDb29raWUoKXsNCiAgICAgICBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKS5tYXAobGlzdCA9PiB7DQogICAgICAgICBsaXN0LnNwbGl0KCc9Jykuc29tZShpdGVtID0+IHsNCiAgICAgICAgICAgaWYoaXRlbSA9PSAnIF9fcmVtZW1iZXJfbWUnKXsNCiAgICAgICAgICAgICB0aGlzLlN0YXR1cyh0cnVlKQ0KICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICB0aGlzLlN0YXR1cyhmYWxzZSkNCiAgICAgICAgICAgfQ0KICAgICAgICAgfSkNCiAgICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/header","sourcesContent":["<template>\r\n  <el-header>\r\n    <div class=\"header\">\r\n      <div class=\"container\">\r\n        <div class=\"left\">\r\n          <router-link tag=\"li\" to=\"/home\" class=\"logo\">\r\n            <img src=\"../../assets/logo_black.png\" alt=\"\">\r\n          </router-link>\r\n        </div>\r\n        <ul class=\"main\">\r\n          <router-link to=\"/home\" tag=\"a\">发现音乐</router-link>\r\n          <router-link to='/rank' tag='a'>排行榜</router-link>\r\n          <router-link to='/songsheet' tag='a'>歌单</router-link>\r\n          <router-link to='/singer' tag='a'>歌手</router-link>\r\n          <router-link to='/video' tag='a'>视频</router-link>\r\n          <router-link to='/mv' tag='a'>MV</router-link>\r\n        </ul>       \r\n        <el-row class=\"right\">\r\n          <div class=\"search\">\r\n            <search-input></search-input>\r\n          </div>\r\n          <div class=\"signin\">\r\n            <div class=\"wrapper\">\r\n              <router-link tag=\"a\" to=\"/signin\" v-show=\"!status\">未登录</router-link>\r\n              <el-dropdown size=\"small\" v-show=\"status\">\r\n                <router-link :to='{name: \"user\",query:{id,}}'>\r\n                  <img :src=\"url\" class=\"user-img\">\r\n                </router-link>\r\n                <el-dropdown-menu slot=\"dropdown\">\r\n                  <el-dropdown-item icon=\"el-icon-user\">\r\n                    <router-link tag=\"a\" :to='{name: \"user\",query:{id,}}'>个人中心</router-link>\r\n                  </el-dropdown-item>\r\n                  <el-dropdown-item icon=\"el-icon-medal\">个人等级</el-dropdown-item>\r\n                  <el-dropdown-item icon=\"el-icon-setting\">设置</el-dropdown-item>\r\n                  <el-dropdown-item icon=\"el-icon-switch-button\" @click.native=\"Logout\">退出登录</el-dropdown-item>\r\n                </el-dropdown-menu>\r\n              </el-dropdown>\r\n            </div>\r\n          </div> \r\n        </el-row>\r\n      </div>\r\n    </div>\r\n\r\n  </el-header>\r\n</template>\r\n\r\n<script>\r\nimport {mapMutations} from 'vuex'\r\nimport SearchInput from '../common/input'\r\nexport default {\r\n  data(){\r\n    return{\r\n      url: '',\r\n      search: '',\r\n      id: '',\r\n    }\r\n  },\r\n  components: {\r\n    SearchInput,\r\n  },\r\n  computed: {\r\n    status: {\r\n      get(){\r\n        return this.$store.state.status\r\n      },\r\n      set(){}\r\n    },\r\n  },\r\n\r\n\r\n  mounted(){\r\n    this.init();\r\n  },\r\n\r\n  methods:{\r\n    ...mapMutations(['CHANGE_STATUS']),\r\n\r\n    init(){\r\n      this.Cookie();\r\n    },\r\n    \r\n    // 退出登录\r\n    async Logout(){\r\n      await this.$api.Logout()\r\n        .then( () => {\r\n          this.CHANGE_STATUS(false);\r\n          this.$route.path !== '/home' && this.$router.push({path: '/home'})\r\n        })\r\n    },\r\n\r\n    // 获取登陆状态\r\n    async Status(flag){\r\n      flag && \r\n      await this.$api.LoginStatus()\r\n      .then( res => { \r\n        let data = res.data.profile;\r\n        this.url = data.avatarUrl;\r\n        this.id = data.userId;\r\n        console.log(res)\r\n      })\r\n      .catch( () => {\r\n        return;\r\n      })\r\n      this.CHANGE_STATUS(flag);\r\n    },\r\n\r\n    // 查看cookie\r\n    Cookie(){\r\n       document.cookie.split(';').map(list => {\r\n         list.split('=').some(item => {\r\n           if(item == ' __remember_me'){\r\n             this.Status(true)\r\n             return true;\r\n           }else{\r\n             this.Status(false)\r\n           }\r\n         })\r\n       })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .el-header{\r\n    @include shadow;\r\n    .header{\r\n      position: fixed;\r\n      top: 0;\r\n      right: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      z-index: 9;\r\n      background: #fff;\r\n    }\r\n    .container{\r\n      display: flex;\r\n      .left{\r\n        @include flex;\r\n        margin-right: 40px;       \r\n        .logo{\r\n          @include flex;\r\n          height: 100%;\r\n          cursor: pointer;\r\n        }   \r\n      }   \r\n      \r\n      .main{\r\n        display: flex;\r\n        height: 60px;\r\n        line-height: 60px;\r\n        color: #909399;\r\n        align-items: center;\r\n        a{\r\n          margin-right: 40px;\r\n          cursor: pointer;\r\n          border-bottom: 2px solid transparent;\r\n          color: #909399;\r\n          &:hover{\r\n            color: #303133;\r\n          }\r\n          &.router-link-active{\r\n            color: $mainColor;\r\n            border-bottom-color: $mainColor;\r\n          }\r\n        }\r\n      }\r\n\r\n      .right{\r\n        position: absolute;\r\n        right: 0;\r\n        top: 10px;\r\n        display: flex;\r\n        .search{\r\n          height: 40px;\r\n        }\r\n        .signin{\r\n          @include flex;\r\n          padding-right: 60px;\r\n          .wrapper{\r\n            width: 50px;\r\n            a{\r\n              color: #909399;\r\n              &:hover{\r\n                color: #303133;\r\n              }\r\n            }\r\n            .el-dropdown{\r\n              @include flex;\r\n              a{\r\n                @include flex;\r\n              }\r\n              .user-img{\r\n                height: 30px;\r\n                border-radius: 50%;\r\n                cursor: pointer;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .el-dropdown-menu{\r\n    hr,a{\r\n      color: #606266;\r\n    }\r\n    .el-dropdown-menu__item{\r\n      &:last-of-type{\r\n        margin-top: 6px;\r\n        padding-top: 5px;\r\n        border-top: 1px solid #ebeef5;\r\n      }\r\n      &:hover{\r\n        background: none;\r\n        color: #fa2800;\r\n        a{\r\n          color: #fa2800;\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n  }\r\n</style>"]}]}