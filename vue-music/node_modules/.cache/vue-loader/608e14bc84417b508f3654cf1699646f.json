{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\songsheet\\songsheet-detail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\songsheet\\songsheet-detail\\index.vue","mtime":1605286268202},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgU29uZ0xpc3QgZnJvbSAnLi4vLi4vc29uZy1saXN0Jw0KaW1wb3J0IFVzZXJMaWtlIGZyb20gJy4uLy4uL3VzZXItbGlrZScNCmltcG9ydCBSZWxhdGVkUGxheWxpc3QgZnJvbSAnLi4vLi4vcmVsYXRlZC1wbGF5bGlzdCcNCmltcG9ydCBDb21tZW50UGxheWxpc3QgZnJvbSAnLi4vLi4vY29tbWVudC9jb21tZW50LXBsYXlsaXN0Jw0KaW1wb3J0IHttYXBHZXR0ZXJzLG1hcEFjdGlvbnMsbWFwU3RhdGV9IGZyb20gJ3Z1ZXgnDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKXsNCiAgICByZXR1cm57DQogICAgICBwbGF5bGlzdDoge30sDQogICAgICB1c2VyOiB7fSwNCiAgICAgIHNvbmdMaXN0OiBbXSwNCiAgICAgIGRlczogJycsDQogICAgICBzaG93OiB0cnVlLA0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIFNvbmdMaXN0LA0KICAgIFVzZXJMaWtlLA0KICAgIFJlbGF0ZWRQbGF5bGlzdCwNCiAgICBDb21tZW50UGxheWxpc3QsDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoWydhdWRpbyddKSwNCiAgICAuLi5tYXBHZXR0ZXJzKFsnZ2V0U29uZ0lkJywnZ2V0Q3VycmVudFNvbmcnXSksDQogIH0sDQogIG1vdW50ZWQoKXsNCiAgICB0aGlzLiRuZXh0VGljayggKCkgPT4gew0KICAgICAgdGhpcy5pbml0KCk7DQogICAgfSkNCiAgfSwNCiAgZGVzdHJveWVkKCl7DQogICAgdGhpcy5wbGF5bGlzdCA9IHt9Ow0KICAgIHRoaXMudXNlciA9IHt9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucyhbJ2N1cnJlbnRTb25nJywnc29uZ3NMaXN0J10pLA0KDQogICAgaW5pdCgpew0KICAgICAgdGhpcy5nZXRTb25nU2hlZXREZXRhaWwoKTsNCiAgICB9LA0KICAgIA0KICAgIC8vIOiOt+WPluatjOWNleivpuaDheS/oeaBrw0KICAgIGFzeW5jIGdldFNvbmdTaGVldERldGFpbCgpew0KICAgICAgbGV0IGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7DQogICAgICBsZXQgc3RyID0gJyc7DQogICAgICBhd2FpdCB0aGlzLiRhcGkuUGxheWxpc3REZXRhaWwoe2lkLH0pDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy5wbGF5bGlzdCA9IHJlcy5kYXRhLnBsYXlsaXN0Ow0KICAgICAgICAgIHRoaXMudXNlciA9IHJlcy5kYXRhLnBsYXlsaXN0LmNyZWF0b3I7DQogICAgICAgICAgdGhpcy5kZXMgPSByZXMuZGF0YS5wbGF5bGlzdC5kZXNjcmlwdGlvbjsNCiAgICAgICAgICB0aGlzLnNvbmdMaXN0ID0gcmVzLmRhdGEucGxheWxpc3QudHJhY2tJZHM7DQogICAgICAgIH0pDQogICAgICB0aGlzLmVsbGlwc2lzKCk7DQogICAgICBzdHIgPSB0aGlzLnV0aWxzLk11c2ljSWQodGhpcy5zb25nTGlzdCk7DQogICAgICB0aGlzLmdldFNvbmdEZXRhaWwoc3RyKTsNCiAgICB9LA0KDQoNCiAgICAvLyDmrYzljZXor6bmg4Xku4vnu43nnIHnlaUNCiAgICBlbGxpcHNpcygpew0KICAgICAgaWYodGhpcy5kZXMpew0KICAgICAgICBpZih0aGlzLnNob3cpew0KICAgICAgICAgIHRoaXMuJHJlZnMuZGVzLmlubmVySFRNTCA9IHRoaXMuZGVzLnN1YnN0cmluZygwLDUwKSArICcuLi4nOw0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICB0aGlzLiRyZWZzLmRlcy5pbm5lckhUTUwgPSB0aGlzLmRlczsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnNob3cgPSAhdGhpcy5zaG93Ow0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDojrflj5bpn7PkuZDor6bmg4UNCiAgICBhc3luYyBnZXRTb25nRGV0YWlsKGlkKXsNCiAgICAgIGF3YWl0IHRoaXMuJGFwaS5Tb25nRGV0YWlsKGlkKQ0KICAgICAgICAudGhlbiggcmVzID0+IHsNCiAgICAgICAgICB0aGlzLnNvbmdMaXN0ID0gcmVzLmRhdGEuc29uZ3M7DQogICAgICAgIH0pDQogICAgfSwNCg0KICAgIC8vIOW8gOWQr+aSreaUvue7hOS7tg0KICAgIHNob3dQbGF5ZXIoKXsNCiAgICAgIGxldCBzb25nTGlzdCA9IHRoaXMudXRpbHMuc3RvcmVJZCh0aGlzLnNvbmdMaXN0KQ0KICAgICAgbGV0IGluZGV4ID0gMDsNCiAgICAgIGxldCBvYmogPSB7DQogICAgICAgIGlkOiB0aGlzLnNvbmdMaXN0W2luZGV4XS5pZCwNCiAgICAgICAgYWxpZDogdGhpcy5zb25nTGlzdFtpbmRleF0uYWwuaWQsDQogICAgICAgIGluZGV4LA0KICAgICAgfQ0KICAgICAgdGhpcy5nZXRTb25nSWQodGhpcy5zb25nTGlzdFtpbmRleF0uaWQpDQogICAgICB0aGlzLmN1cnJlbnRTb25nKG9iaikNCiAgICAgIHRoaXMuc29uZ3NMaXN0KHNvbmdMaXN0KTsNCiAgICAgIHRoaXMuYXVkaW8ucGF1c2VkICYmIHRoaXMuYXVkaW8ucGxheSgpOw0KICAgIH0sDQoNCg0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"index.vue","sourceRoot":"src/components/common/songsheet/songsheet-detail","sourcesContent":["<template>\r\n  <div class=\"songsheet-detail shadow\">\r\n    <div class=\"container\">\r\n      <div class=\"left\">\r\n        <div class=\"top\">\r\n          <div class=\"cover\">\r\n            <img :src=\"playlist.coverImgUrl\">\r\n          </div>\r\n          <div class=\"info\">\r\n            <div class=\"title\">\r\n              <span>{{ playlist.name }}</span>\r\n            </div>\r\n            <div class=\"user\">\r\n              <div class=\"cover\">\r\n                <img :src=\"user.avatarUrl\">\r\n              </div>\r\n              <div class=\"info\">\r\n                <span class=\"nickname\">{{ user.nickname }}</span>\r\n                <span class=\"create-time\">{{ utils.getYear(playlist.createTime) }}创建</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"tag\" v-if=\"playlist.tag\">\r\n              <span>标签:</span>\r\n              <router-link \r\n                tag=\"a\" \r\n                :to=\"'/songsheet?cat=' + item\" \r\n                v-for=\"item in playlist.tags\" \r\n                :key=\"item\">\r\n                {{ item || '' }}\r\n              </router-link>\r\n            </div>\r\n            <div class=\"desc\">\r\n              <p ref=\"des\"></p>\r\n              <div class=\"btn\" @click=\"ellipsis\" v-if=\"des\">\r\n                <span v-show=\"show\">收起</span>\r\n                <span v-show=\"!show\">展开</span>\r\n                <i \r\n                  :class=\"show ? 'iconfont icon-right-arrow is-active' :\r\n                  'iconfont icon-right-arrow'\">\r\n                </i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"content\">\r\n          <div class=\"tool\">\r\n            <div class=\"item\" @click=\"showPlayer\">\r\n              <i class=\"iconfont icon-nextbtn\"></i>\r\n              <span>播放全部</span>\r\n            </div>\r\n            <div class=\"item\">\r\n              <i class=\"iconfont icon-xinaixin3\"></i>\r\n              <span>收藏</span>\r\n            </div>\r\n          </div>\r\n          <song-list :songLists=\"songList\"/> \r\n        </div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <user-like></user-like>\r\n        <related-playlist></related-playlist>\r\n        <comment-playlist></comment-playlist>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SongList from '../../song-list'\r\nimport UserLike from '../../user-like'\r\nimport RelatedPlaylist from '../../related-playlist'\r\nimport CommentPlaylist from '../../comment/comment-playlist'\r\nimport {mapGetters,mapActions,mapState} from 'vuex'\r\nexport default {\r\n  data(){\r\n    return{\r\n      playlist: {},\r\n      user: {},\r\n      songList: [],\r\n      des: '',\r\n      show: true,\r\n    }\r\n  },\r\n  components: {\r\n    SongList,\r\n    UserLike,\r\n    RelatedPlaylist,\r\n    CommentPlaylist,\r\n  },\r\n  computed: {\r\n    ...mapState(['audio']),\r\n    ...mapGetters(['getSongId','getCurrentSong']),\r\n  },\r\n  mounted(){\r\n    this.$nextTick( () => {\r\n      this.init();\r\n    })\r\n  },\r\n  destroyed(){\r\n    this.playlist = {};\r\n    this.user = {};\r\n  },\r\n  methods: {\r\n    ...mapActions(['currentSong','songsList']),\r\n\r\n    init(){\r\n      this.getSongSheetDetail();\r\n    },\r\n    \r\n    // 获取歌单详情信息\r\n    async getSongSheetDetail(){\r\n      let id = this.$route.query.id;\r\n      let str = '';\r\n      await this.$api.PlaylistDetail({id,})\r\n        .then(res => {\r\n          this.playlist = res.data.playlist;\r\n          this.user = res.data.playlist.creator;\r\n          this.des = res.data.playlist.description;\r\n          this.songList = res.data.playlist.trackIds;\r\n        })\r\n      this.ellipsis();\r\n      str = this.utils.MusicId(this.songList);\r\n      this.getSongDetail(str);\r\n    },\r\n\r\n\r\n    // 歌单详情介绍省略\r\n    ellipsis(){\r\n      if(this.des){\r\n        if(this.show){\r\n          this.$refs.des.innerHTML = this.des.substring(0,50) + '...';\r\n        }else{\r\n          this.$refs.des.innerHTML = this.des;\r\n        }\r\n        this.show = !this.show;\r\n      }\r\n    },\r\n\r\n    // 获取音乐详情\r\n    async getSongDetail(id){\r\n      await this.$api.SongDetail(id)\r\n        .then( res => {\r\n          this.songList = res.data.songs;\r\n        })\r\n    },\r\n\r\n    // 开启播放组件\r\n    showPlayer(){\r\n      let songList = this.utils.storeId(this.songList)\r\n      let index = 0;\r\n      let obj = {\r\n        id: this.songList[index].id,\r\n        alid: this.songList[index].al.id,\r\n        index,\r\n      }\r\n      this.getSongId(this.songList[index].id)\r\n      this.currentSong(obj)\r\n      this.songsList(songList);\r\n      this.audio.paused && this.audio.play();\r\n    },\r\n\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .songsheet-detail{\r\n    @include minHeight;\r\n    padding: 20px 0;\r\n    display: flex;\r\n    align-items: flex-start;\r\n    .container{\r\n      display: flex;\r\n      .left{\r\n        @include left;\r\n        @include shadow;\r\n        .top{\r\n          display: flex;\r\n          .cover{\r\n            width: 200px;\r\n            height: 200px;\r\n            border-radius: 8px;\r\n            margin-right: 30px;\r\n            flex-shrink: 0;\r\n            img{\r\n              width: 100%;\r\n              height: 100%;\r\n              border-radius: 8px;\r\n            }\r\n          }\r\n          .info{\r\n            display: flex;\r\n            flex-direction: column;\r\n            justify-content: center;\r\n            .title{\r\n              margin-bottom: 20px;\r\n              margin-top: 10px;\r\n              width: 100%;\r\n              line-height: 24px;\r\n              font-size: 24px;\r\n              font-weight: 700;\r\n              overflow: hidden;\r\n            }\r\n            .user{\r\n              display: flex;\r\n              margin-bottom: 15px;\r\n              flex-direction: row;\r\n              .cover{\r\n                width: 30px;\r\n                height: 30px;\r\n                border-radius: 50%;\r\n                position: relative;\r\n                margin-right: 15px;\r\n                cursor: pointer;\r\n                img{\r\n                  border-radius: 50%;\r\n                }\r\n              }\r\n              .info{\r\n                margin-right: 30px;\r\n                display: flex;\r\n                align-items: center;\r\n                flex-direction: row;\r\n                font-size: 14px;\r\n                .nickname{\r\n                  margin-right: 30px;\r\n                  cursor: pointer;\r\n                  &:hover{\r\n                    color: $mainColor;\r\n                  }\r\n                }\r\n                .create-time{\r\n                  color: grey;\r\n                }\r\n              }\r\n            }\r\n            .tag{\r\n              display: flex;\r\n              flex-direction: row;\r\n              align-items: center;\r\n              span{\r\n                margin-right: 20px;\r\n                font-size: 14px;\r\n              }\r\n              a{\r\n                margin-right: 15px;\r\n                padding: 4px 12px;\r\n                border-radius: 15px;\r\n                font-size: 12px;\r\n                color: #fff;\r\n                background: $mainColor;\r\n                cursor: pointer;\r\n              }\r\n            }\r\n            .desc{\r\n              margin-top: 15px;\r\n              display: flex;\r\n              flex-direction: column;\r\n              width: 300px;\r\n              overflow: hidden;\r\n              text-overflow: ellipsis;\r\n              transition: all 1s ease;\r\n              p{\r\n                line-height: 1.6;\r\n                font-weight: 400;\r\n                flex: 1;\r\n                font-size: 14px;\r\n              }\r\n              .btn{\r\n                width: 50px;\r\n                font-size: 14px;\r\n                color: $mainColor;\r\n                cursor: pointer;\r\n                i{\r\n                  display: inline-block;\r\n                  font-size: 16px;\r\n                  font-weight: 700;\r\n                  transform: translateY(1px) rotate(90deg);\r\n                  transition: all 1s ease;\r\n                  &.is-active{\r\n                    transform: translateY(1px) rotate(-90deg);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        .content{\r\n          margin-top: 20px;\r\n          .tool{\r\n            margin: 15px 0;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: flex-end;\r\n            .item{\r\n              margin-left: 15px;\r\n              padding: 7px 15px;\r\n              display: flex;\r\n              align-items: center;\r\n              justify-content: center;\r\n              border-radius: 50px;\r\n              background: #f2f2f2;\r\n              color: #333;\r\n              font-size: 14px;\r\n              cursor: pointer;\r\n              i{\r\n                margin-right: 5px;\r\n                font-size: 12px;\r\n              }\r\n\r\n              &:first-child{\r\n                background: $mainColor;\r\n                color: #fff;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .right{\r\n       @include right;\r\n      }\r\n    }\r\n  }\r\n  \r\n</style>"]}]}