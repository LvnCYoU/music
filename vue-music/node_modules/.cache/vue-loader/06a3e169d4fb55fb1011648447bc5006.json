{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\src\\views\\login\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\src\\views\\login\\Index.vue","mtime":1600536934821},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBLaW5lc2lzQ29udGFpbmVyLCBLaW5lc2lzRWxlbWVudCB9IGZyb20gJ3Z1ZS1raW5lc2lzJw0KaW1wb3J0IHsgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ2xvZ2luJywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcnVsZUZvcm06IHsNCiAgICAgICAgcGhvbmU6ICcnLA0KICAgICAgICBwYXNzd29yZDogJycNCiAgICAgIH0sDQogICAgICBydWxlczogew0KICAgICAgICBwaG9uZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfmiYvmnLrlj7fpg73msqHmnInvvIEnLCB0cmlnZ2VyOiAnYmx1cicgfV0sDQogICAgICAgIHBhc3N3b3JkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WvhueggeWRou+8gScsIHRyaWdnZXI6ICdibHVyJyB9XQ0KICAgICAgfSwNCiAgICAgIGxvZ2luTG9hZGluZzogZmFsc2UsDQogICAgICBwYXJhbGxheDogJ2RlcHRoJw0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIEtpbmVzaXNDb250YWluZXIsDQogICAgS2luZXNpc0VsZW1lbnQNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOeZu+W9leaTjeS9nA0KICAgIGxvZ2luKGZvcm1OYW1lKSB7DQogICAgICB0aGlzLmxvZ2luTG9hZGluZyA9IGZhbHNlDQogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIHRoaXMubG9naW5Mb2FkaW5nID0gdHJ1ZQ0KICAgICAgICAgIGxldCB7IHBob25lLCBwYXNzd29yZCB9ID0gdGhpcy5ydWxlRm9ybQ0KICAgICAgICAgIHRoaXMubG9naW5Bc3luYyhwaG9uZSwgcGFzc3dvcmQpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOeZu+W9leaOpeWPo+iwg+eUqA0KICAgIGxvZ2luQXN5bmMocGhvbmUsIHBhc3N3b3JkKSB7DQogICAgICB0aGlzLmxvZ2luTG9hZGluZyA9IGZhbHNlDQogICAgICB0aGlzLiRhcGkNCiAgICAgICAgLmxvZ2luKHBob25lLCBwYXNzd29yZCkNCiAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMuZ2V0VXNlckRldGFpbChyZXMucHJvZmlsZS51c2VySWQpDQogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Nvb2tpZScsIHJlcy5jb29raWUpDQogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzLnRva2VuKQ0KICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2dpblN0YXR1JywgdHJ1ZSkNCiAgICAgICAgICAgIHRoaXMuc2V0TG9naW5TdGF0dSh0cnVlKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S8vOS5juWHuuS6huS7gOS5iOmXrumimOWViu+8jOWVp+WVp+WVpyEhIScpDQogICAgICAgIH0pDQogICAgfSwNCiAgICAvLyDojrflj5bkuKrkurrkv6Hmga8NCiAgICBhc3luYyBnZXRVc2VyRGV0YWlsKHVpZCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5nZXRVc2VyRGV0YWlsKHVpZCkNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICBsZXQgdXNlckluZm8gPSByZXMucHJvZmlsZQ0KICAgICAgICAgIHVzZXJJbmZvLmxldmVsID0gcmVzLmxldmVsDQogICAgICAgICAgdXNlckluZm8ubGlzdGVuU29uZ3MgPSByZXMubGlzdGVuU29uZ3MNCiAgICAgICAgICB1c2VySW5mby5jcmVhdGVUaW1lID0gcmVzLmNyZWF0ZVRpbWUNCiAgICAgICAgICB1c2VySW5mby5jcmVhdGVEYXlzID0gcmVzLmNyZWF0ZURheXMNCiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJbmZvJywgSlNPTi5zdHJpbmdpZnkodXNlckluZm8pKQ0KICAgICAgICAgIHRoaXMuc2V0VXNlckluZm8ocmVzLnByb2ZpbGUpDQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAn55m75b2V5oiQ5YqfJywNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pDQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmxvZ2luTG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvJyB9KQ0KICAgICAgICAgIH0sIDE1MDApDQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgfQ0KICAgIH0sDQogICAgaXNFbXB0eSh2YWwpIHsNCiAgICAgIHJldHVybiAoDQogICAgICAgIHZhbCA9PT0gdW5kZWZpbmVkIHx8DQogICAgICAgIHZhbCA9PT0gbnVsbCB8fA0KICAgICAgICAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXModmFsKS5sZW5ndGggPT09IDApIHx8DQogICAgICAgICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiB2YWwudHJpbSgpLmxlbmd0aCA9PT0gMCkNCiAgICAgICkNCiAgICB9LA0KICAgIC4uLm1hcE11dGF0aW9ucyh7DQogICAgICBzZXRVc2VySW5mbzogJ1NFVF9VU0VSSU5GTycsDQogICAgICBzZXRMb2dpblN0YXR1OiAnU0VUX0xPR0lOU1RBVFUnDQogICAgfSkNCiAgfQ0KfQ0K"},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n  <kinesis-container>\r\n    <div class=\"login-wrap\">\r\n      <kinesis-element :parallaxStrength=\"4\" :type=\"parallax\">\r\n        <div class=\"login-box\">\r\n          <img src=\"../../assets/images/logo-a.png\" class=\"nice-logo\" />\r\n          <p>NICEMUSIC</p>\r\n          <div class=\"login-form\">\r\n            <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\">\r\n              <div class=\"login-input\">\r\n                <el-form-item prop=\"phone\">\r\n                  <el-input\r\n                    class=\"login-text\"\r\n                    type=\"text\"\r\n                    placeholder=\"请输入网易云音乐手机号\"\r\n                    v-model=\"ruleForm.phone\"\r\n                  ></el-input>\r\n                  <span class=\"login-focus\"></span>\r\n                  <span class=\"login-symbol\">\r\n                    <i class=\"iconfont nicephone2\"></i>\r\n                  </span>\r\n                </el-form-item>\r\n              </div>\r\n              <div class=\"login-input\">\r\n                <el-form-item prop=\"password\">\r\n                  <el-input\r\n                    class=\"login-text\"\r\n                    type=\"password\"\r\n                    placeholder=\"请输入密码\"\r\n                    v-model=\"ruleForm.password\"\r\n                    @keyup.enter.native=\"login('ruleForm')\"\r\n                  ></el-input>\r\n                  <span class=\"login-focus\"></span>\r\n                  <span class=\"login-symbol\">\r\n                    <i class=\"iconfont nicemima\"></i>\r\n                  </span>\r\n                </el-form-item>\r\n              </div>\r\n              <div class=\"login-footer\">\r\n                <div class=\"login-btn-wrap\">\r\n                  <el-button\r\n                    class=\"login-btn\"\r\n                    type=\"primary\"\r\n                    :loading=\"loginLoading\"\r\n                    @click=\"login('ruleForm')\"\r\n                    >登录</el-button\r\n                  >\r\n                </div>\r\n              </div>\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n      </kinesis-element>\r\n    </div>\r\n  </kinesis-container>\r\n</template>\r\n\r\n<script>\r\nimport { KinesisContainer, KinesisElement } from 'vue-kinesis'\r\nimport { mapMutations } from 'vuex'\r\nexport default {\r\n  name: 'login',\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        phone: '',\r\n        password: ''\r\n      },\r\n      rules: {\r\n        phone: [{ required: true, message: '手机号都没有！', trigger: 'blur' }],\r\n        password: [{ required: true, message: '密码呢！', trigger: 'blur' }]\r\n      },\r\n      loginLoading: false,\r\n      parallax: 'depth'\r\n    }\r\n  },\r\n  components: {\r\n    KinesisContainer,\r\n    KinesisElement\r\n  },\r\n  methods: {\r\n    // 登录操作\r\n    login(formName) {\r\n      this.loginLoading = false\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.loginLoading = true\r\n          let { phone, password } = this.ruleForm\r\n          this.loginAsync(phone, password)\r\n        } else {\r\n          this.loading = false\r\n        }\r\n      })\r\n    },\r\n    // 登录接口调用\r\n    loginAsync(phone, password) {\r\n      this.loginLoading = false\r\n      this.$api\r\n        .login(phone, password)\r\n        .then(res => {\r\n          console.log(res)\r\n          if (res.code === 200) {\r\n            this.getUserDetail(res.profile.userId)\r\n            window.localStorage.setItem('cookie', res.cookie)\r\n            window.localStorage.setItem('token', res.token)\r\n            window.localStorage.setItem('loginStatu', true)\r\n            this.setLoginStatu(true)\r\n          } else {\r\n            this.$message.error(res.msg)\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message.error('似乎出了什么问题啊，啧啧啧!!!')\r\n        })\r\n    },\r\n    // 获取个人信息\r\n    async getUserDetail(uid) {\r\n      try {\r\n        let res = await this.$api.getUserDetail(uid)\r\n        if (res.code === 200) {\r\n          let userInfo = res.profile\r\n          userInfo.level = res.level\r\n          userInfo.listenSongs = res.listenSongs\r\n          userInfo.createTime = res.createTime\r\n          userInfo.createDays = res.createDays\r\n          window.localStorage.setItem('userInfo', JSON.stringify(userInfo))\r\n          this.setUserInfo(res.profile)\r\n          this.$message({\r\n            message: '登录成功',\r\n            type: 'success'\r\n          })\r\n          setTimeout(() => {\r\n            this.loginLoading = false\r\n            this.$router.push({ path: '/' })\r\n          }, 1500)\r\n        }\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n    isEmpty(val) {\r\n      return (\r\n        val === undefined ||\r\n        val === null ||\r\n        (typeof val === 'object' && Object.keys(val).length === 0) ||\r\n        (typeof val === 'string' && val.trim().length === 0)\r\n      )\r\n    },\r\n    ...mapMutations({\r\n      setUserInfo: 'SET_USERINFO',\r\n      setLoginStatu: 'SET_LOGINSTATU'\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n  .login-wrap {\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  display: -webkit-box;\r\n  display: -webkit-flex;\r\n  display: -moz-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 15px;\r\n  background: #5dd5c8 url(../../assets/images/newbg1.png) center bottom no-repeat;\r\n  .login-box {\r\n    overflow: hidden;\r\n    height: 486px;\r\n    position: relative;\r\n    width: 350px;\r\n    max-width: 350px;\r\n    margin: 4em auto;\r\n    background: #FFF;\r\n    background-image: url(../../assets/images/logbg.jpg);\r\n    border-radius: 8px;\r\n    box-shadow: 1px 2px 15px rgba(0,0,0,.3);\r\n    background-repeat: no-repeat;\r\n    background-position: bottom;\r\n    text-align: center;\r\n    -webkit-backface-visibility: hidden;\r\n    -webkit-transition-property: -webkit-transform;\r\n    -moz-transition-property: -moz-transform;\r\n    transition-property: transform;\r\n    -webkit-transition-duration: 0.3s;\r\n    -moz-transition-duration: 0.3s;\r\n    transition-duration: 0.3s;\r\n    z-index: 80;\r\n    .switch {\r\n      font-size: 13px;\r\n      position: absolute;\r\n      right: 0px;\r\n      bottom: 5px;\r\n      width: 100%;\r\n      text-align: center;\r\n      color: #0ef3da;\r\n      cursor: pointer;\r\n      b {\r\n        color: #0ef3da;\r\n        font-weight: 600;\r\n      }\r\n    }\r\n    .nice-logo {\r\n      width: 55px;\r\n      margin: 40px 0 0px;\r\n    }\r\n    p {\r\n      margin-bottom: 45px;\r\n    }\r\n    .login-form {\r\n      width: 296px;\r\n      margin: 0 auto;\r\n      .login-title {\r\n        font-size: 24px;\r\n        color: #333333;\r\n        line-height: 1.2;\r\n        text-align: center;\r\n        width: 100%;\r\n        display: block;\r\n        padding-bottom: 54px;\r\n      }\r\n      .login-input {\r\n        position: relative;\r\n        width: 100%;\r\n        z-index: 1;\r\n        margin-bottom: 10px;\r\n        .login-text {\r\n          font-size: 14px;\r\n          line-height: 1.5;\r\n          color: #666666;\r\n          display: block;\r\n          width: 100%;\r\n          border: 1px solid #e3e7ed;\r\n          height: 42px;\r\n          border-radius: 3px;\r\n          padding: 0 30px 0 45px;\r\n          .el-input__inner {\r\n            font-size: 14px;\r\n            line-height: 1.5;\r\n            color: #666666;\r\n            display: block;\r\n            width: 100%;\r\n            border: 0;\r\n            height: 40px;\r\n            padding: 0;\r\n            &:-webkit-autofill,\r\n            &:-webkit-autofill:hover,\r\n            &:-webkit-autofill:focus {\r\n              box-shadow:0 0 0 60px #fff inset;\r\n              color: #666666;\r\n            }\r\n          }\r\n        }\r\n        .login-focus {\r\n          display: block;\r\n          position: absolute;\r\n          border-radius: 3px;\r\n          bottom: 0;\r\n          left: 0;\r\n          z-index: -1;\r\n          width: 100%;\r\n          height: 100%;\r\n          box-shadow: 0px 0px 0px 0px;\r\n          color: rgba(230, 230, 230, 0.8);\r\n        }\r\n        .login-symbol {\r\n          font-size: 15px;\r\n          display: -webkit-box;\r\n          display: -webkit-flex;\r\n          display: -moz-box;\r\n          display: -ms-flexbox;\r\n          display: flex;\r\n          align-items: center;\r\n          position: absolute;\r\n          border-radius: 3px;\r\n          bottom: 0;\r\n          left: 0;\r\n          width: 100%;\r\n          height: 100%;\r\n          padding-left: 15px;\r\n          pointer-events: none;\r\n          color: #666666;\r\n          -webkit-transition: all 0.4s;\r\n          -o-transition: all 0.4s;\r\n          -moz-transition: all 0.4s;\r\n          transition: all 0.4s;\r\n        }\r\n        .login-text {\r\n          .el-input__inner:focus + .el-input__inner {\r\n            -webkit-animation: anim-shadow 0.5s ease-in-out forwards;\r\n            animation: anim-shadow 0.5s ease-in-out forwards;\r\n          }\r\n        }\r\n      }\r\n      .login-footer {\r\n        width: 100%;\r\n        display: -webkit-box;\r\n        display: -webkit-flex;\r\n        display: -moz-box;\r\n        display: -ms-flexbox;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: center;\r\n        padding-top: 10px;\r\n        .login-btn-wrap {\r\n          width: 100%;\r\n          display: block;\r\n          position: relative;\r\n          z-index: 1;\r\n          border-radius: 3px;\r\n          overflow: hidden;\r\n          margin: 0 auto;\r\n          .login-btn-bg {\r\n            position: absolute;\r\n            z-index: -1;\r\n            width: 300%;\r\n            height: 100%;\r\n            background: #a64bf4;\r\n            background: -webkit-linear-gradient(right, #00dbde, #fc00ff, #00dbde, #fc00ff);\r\n            top: 0;\r\n            left: -100%;\r\n            -webkit-transition: all 0.4s;\r\n            -o-transition: all 0.4s;\r\n            -moz-transition: all 0.4s;\r\n            transition: all 0.4s;\r\n          }\r\n          .login-btn {\r\n            font-size: 15px;\r\n            line-height: 1.5;\r\n            color: #fff;\r\n            text-transform: uppercase;\r\n            width: 100%;\r\n            height: 42px;\r\n            border-radius: 3px;\r\n            border: 0;\r\n            background: #5dd5c8;\r\n            display: -webkit-box;\r\n            display: -webkit-flex;\r\n            display: -moz-box;\r\n            display: -ms-flexbox;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            padding: 0 25px;\r\n          }\r\n          &:hover .login-btn-bg {\r\n            left: 0;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@-webkit-keyframes anim-shadow {\r\n  to {\r\n    box-shadow: 0px 0px 70px 25px;\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n@keyframes anim-shadow {\r\n  to {\r\n    box-shadow: 0px 0px 70px 25px;\r\n    opacity: 0;\r\n  }\r\n}\r\n</style>\r\n"]}]}