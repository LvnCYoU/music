{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\song-list\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\song-list\\index.vue","mtime":1605505082208},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge21hcEdldHRlcnMsbWFwQWN0aW9ucyxtYXBTdGF0ZX0gZnJvbSAndnVleCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgcHJvcHM6IHsNCiAgICBzb25nTGlzdHM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgfQ0KICB9LA0KICBkYXRhKCl7DQogICAgcmV0dXJuew0KICAgICAgbGlzdDogW10sDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIGVycm9yOiBmYWxzZSwNCiAgICAgIG1heDogMCwNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoWydhdWRpbycsJ3BsYXlTdGF0dXMnLCdwbGF5aW5nJywnc29uZ0lkJ10pLA0KICAgIC4uLm1hcEdldHRlcnMoWydnZXRTb25nSWQnLCdnZXRDdXJyZW50U29uZycsJ2dldFBsYXlTdGF0dXMnXSksDQoNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBzb25nTGlzdHModmFsKXsNCiAgICAgIGlmKHZhbC5sZW5ndGggPT0gMCl7DQogICAgICAgIHRoaXMubGlzdC5sZW5ndGggPSAwOw0KICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJuIDsNCiAgICAgIH1lbHNlew0KICAgICAgICB0aGlzLmVycm9yID0gZmFsc2U7DQogICAgICAgIGxldCBhcnIgPSB2YWwuc2xpY2UoMCx0aGlzLm1heCB8fCAxMCk7DQogICAgICAgIHRoaXMubGlzdC5sZW5ndGggPSAwOw0KICAgICAgICBpZih2YWxbMF0uc29uZyl7DQogICAgICAgICAgYXJyLm1hcChsaXN0ID0+IHsNCiAgICAgICAgICAgIGxldCBvYmogPSBsaXN0LnNvbmc7DQogICAgICAgICAgICB0aGlzLmxpc3QucHVzaChvYmopDQogICAgICAgICAgfSkNCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgdGhpcy5saXN0ID0gYXJyDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIA0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKXsNCiAgICB0aGlzLmluaXQoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC4uLm1hcEFjdGlvbnMoWw0KICAgICAgJ2N1cnJlbnRTb25nJywNCiAgICAgICdzb25nc0xpc3QnLA0KICAgIF0pLA0KICAgIA0KICAgIGluaXQoKXsNCiAgICAgIHRoaXMucGxheVN0YXR1cyAmJiB0aGlzLmdldFBsYXlTdGF0dXMoZmFsc2UpOw0KICAgIH0sDQoNCiAgICAvLyDlpITnkIbluo/lj7cNCiAgICBoYW5kbGVOdW0obnVtKXsNCiAgICAgIG51bSsrOw0KICAgICAgcmV0dXJuIG51bSA8IDEwID8gJzAnICsgbnVtIDogbnVtDQogICAgfSwNCg0KICAgIC8vIOW8gOWQr+aSreaUvue7hOS7tg0KICAgIHNob3dQbGF5ZXIoaWQsYWxpZCxpbmRleCl7DQogICAgICAgIGxldCBzb25nTGlzdCA9IHRoaXMudXRpbHMuc3RvcmVJZCh0aGlzLmxpc3QpDQogICAgICAgIGxldCBvYmogPSB7DQogICAgICAgICAgaWQsDQogICAgICAgICAgYWxpZCwNCiAgICAgICAgICBpbmRleCwNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmdldFNvbmdJZChpZCkNCiAgICAgICAgdGhpcy5jdXJyZW50U29uZyhvYmopDQogICAgICAgIHRoaXMuc29uZ3NMaXN0KHNvbmdMaXN0KTsNCiAgICAgICAgICBpZih0aGlzLnBsYXlTdGF0dXMpew0KICAgICAgICAgICAgdGhpcy5hdWRpby5wYXVzZSgpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgdGhpcy5wbGF5aW5nICYmDQogICAgICAgICAgICB0aGlzLmF1ZGlvLnBsYXkoKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5nZXRQbGF5U3RhdHVzKCF0aGlzLnBsYXlTdGF0dXMpDQogICAgfSwNCg0KICAgIC8vIOWKoOi9veabtOWkmuatjOabsg0KICAgIGxvYWRTb25nKCl7IA0KICAgICAgbGV0IGxlbiA9IHRoaXMubGlzdC5sZW5ndGg7DQogICAgICB0aGlzLm1heCA9IGxlbiArIDEwOw0KICAgICAgaWYodGhpcy5zb25nTGlzdHNbMF0uc29uZyl7DQogICAgICAgIGxldCBhcnIgPSB0aGlzLnNvbmdMaXN0cy5zbGljZShsZW4sdGhpcy5tYXgpOw0KICAgICAgICBhcnIubWFwKGxpc3QgPT4gew0KICAgICAgICAgIGxldCBvYmogPSBsaXN0LnNvbmc7DQogICAgICAgICAgdGhpcy5saXN0LnB1c2gob2JqKTsNCiAgICAgICAgfSkNCiAgICAgIH1lbHNlew0KICAgICAgICB0aGlzLmxpc3QgPSB0aGlzLnNvbmdMaXN0cy5zbGljZSgwLHRoaXMubWF4KTsNCiAgICAgIH0NCiAgICB9LA0KDQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"index.vue","sourceRoot":"src/components/common/song-list","sourcesContent":["<template>\r\n  <div class=\"song-list\" \r\n    v-loading=\"false\"\r\n    :data=\"list\"\r\n    element-loading-text=\"拼命加载中\"\r\n    element-loading-background=\"#fff\"\r\n  >\r\n    <div class=\"song-box\">\r\n      <div class=\"title\">\r\n        <div class=\"index\">序号</div>\r\n        <div class=\"name\">歌曲</div>\r\n        <div class=\"artist\">歌手</div>\r\n        <div class=\"album\">专辑</div>\r\n        <div class=\"duration\">时长</div>\r\n      </div>\r\n      <div \r\n        :class=\"songId == item.id ? \r\n                playStatus ? \r\n                'item is-active' : 'item' : 'item' \"\r\n        v-for=\"(item,index) in list\" \r\n        :key=\"item.id\" \r\n        ref=\"list\"\r\n        @click=\"showPlayer(item.id,item.al.id,index)\"\r\n      >\r\n        <div class=\"index\">\r\n          <span class=\"num\">{{ handleNum(index)}}</span>\r\n          <i class=\"iconfont icon-bofang\" ref=\"icon\"></i>\r\n          <div class=\"play-animation\">\r\n            <span></span>\r\n            <span></span>\r\n            <span></span>\r\n            <span></span>\r\n            <span></span>\r\n          </div>\r\n        </div>\r\n        <div class=\"name\">\r\n          <div class=\"cover\">\r\n            <el-image \r\n              :src=\"item.al.picUrl\" \r\n              fit=\"fill\"\r\n              v-if=\"item.al\"></el-image>\r\n          </div>\r\n          <div class=\"song-name ellipsis\">\r\n            {{ item.name }}\r\n          </div>\r\n        </div>\r\n        <div class=\"artist\">\r\n          <div class=\"wrapper ellipsis\">\r\n            <span>{{ utils.getSinger(item.ar)}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"album\">\r\n          <div class=\"wrapper ellipsis\">\r\n            <span v-if=\"item.al\">{{ item.al.name }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"duration\">\r\n          <div class=\"wrapper\">\r\n            <span>{{ utils.formatTime(item.dt) }}</span>  \r\n          </div>  \r\n        </div>  \r\n      </div>\r\n    </div>\r\n    <div \r\n      class=\"load-more\" \r\n      v-show=\"!error\"\r\n    >\r\n      <div class=\"more\">\r\n        <span @click=\"loadSong\">查看更多</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"error\" v-show=\"error\">\r\n      <span>暂时没有播放数据噢~</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters,mapActions,mapState} from 'vuex'\r\nexport default {\r\n  props: {\r\n    songLists: {\r\n      type: Array,\r\n      required: true,\r\n    }\r\n  },\r\n  data(){\r\n    return{\r\n      list: [],\r\n      loading: false,\r\n      error: false,\r\n      max: 0,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['audio','playStatus','playing','songId']),\r\n    ...mapGetters(['getSongId','getCurrentSong','getPlayStatus']),\r\n\r\n  },\r\n  watch: {\r\n    songLists(val){\r\n      if(val.length == 0){\r\n        this.list.length = 0;\r\n        this.error = true;\r\n        return ;\r\n      }else{\r\n        this.error = false;\r\n        let arr = val.slice(0,this.max || 10);\r\n        this.list.length = 0;\r\n        if(val[0].song){\r\n          arr.map(list => {\r\n            let obj = list.song;\r\n            this.list.push(obj)\r\n          })\r\n        }else{\r\n          this.list = arr\r\n        }\r\n      }\r\n      \r\n    },\r\n  },\r\n  mounted(){\r\n    this.init();\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'currentSong',\r\n      'songsList',\r\n    ]),\r\n    \r\n    init(){\r\n      this.playStatus && this.getPlayStatus(false);\r\n    },\r\n\r\n    // 处理序号\r\n    handleNum(num){\r\n      num++;\r\n      return num < 10 ? '0' + num : num\r\n    },\r\n\r\n    // 开启播放组件\r\n    showPlayer(id,alid,index){\r\n        let songList = this.utils.storeId(this.list)\r\n        let obj = {\r\n          id,\r\n          alid,\r\n          index,\r\n        }\r\n        this.getSongId(id)\r\n        this.currentSong(obj)\r\n        this.songsList(songList);\r\n          if(this.playStatus){\r\n            this.audio.pause();\r\n          }\r\n          else{\r\n            this.playing &&\r\n            this.audio.play();\r\n          }\r\n          this.getPlayStatus(!this.playStatus)\r\n    },\r\n\r\n    // 加载更多歌曲\r\n    loadSong(){ \r\n      let len = this.list.length;\r\n      this.max = len + 10;\r\n      if(this.songLists[0].song){\r\n        let arr = this.songLists.slice(len,this.max);\r\n        arr.map(list => {\r\n          let obj = list.song;\r\n          this.list.push(obj);\r\n        })\r\n      }else{\r\n        this.list = this.songLists.slice(0,this.max);\r\n      }\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped> \r\n  .song-box{\r\n    user-select: none;\r\n    &>div{\r\n      padding: 0 9px;\r\n      display: flex;\r\n      height: 50px;\r\n      line-height: 50px;\r\n      font-size: 14px;\r\n      &>div{\r\n        padding: 0 9px;\r\n        display: flex;\r\n        width: 100%;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n      .index{\r\n        display: inline-block;\r\n        width: 10%;\r\n        text-align: center;\r\n        i{\r\n          display: none;\r\n          color: $mainColor;\r\n        }\r\n      }\r\n      .name{\r\n        align-items: center;\r\n        width: 40%;\r\n        .cover{\r\n          margin-right: 10px;\r\n          width: 35px;\r\n          height: 35px;\r\n          border-radius: 5px;\r\n        }\r\n        .song-name{\r\n          width: 150px;\r\n        }\r\n      }\r\n      .artist{\r\n        width: 25%;\r\n      }\r\n      .album{\r\n        width: 15%;\r\n      }\r\n      .duration{\r\n        padding-right: 40px;\r\n        display: inline-block;\r\n        width: 15%;\r\n        text-align: right;\r\n      }\r\n\r\n      &.title{\r\n        text-align: left;\r\n        font-weight: 300;\r\n        background: #fafafa; \r\n        color: #999;\r\n        div{\r\n          display: inline-block;\r\n        }\r\n      }\r\n      &.item{\r\n        justify-content: center;\r\n        align-items: center;\r\n        transition: all .5s ease;  \r\n        cursor: pointer;\r\n        .play-animation{\r\n          margin-right: 0;\r\n          display: none;\r\n          height: 16px;\r\n          min-width: 18px;\r\n          justify-content: center;\r\n          overflow: hidden;\r\n          span{\r\n            animation: fly 2s infinite linear;\r\n            width: 2px;\r\n            height: 100%;\r\n            margin-left: 2px;\r\n            background: #fa2800;\r\n            &:nth-child(1) { animation-delay: -1s }\r\n            &:nth-child(3) { animation-delay: -1.5s }\r\n            &:nth-child(4) { animation-delay: -0.9s }\r\n            &:nth-child(5) { animation-delay: -0.6s }\r\n          }\r\n        }\r\n        &:hover{\r\n          background: #e8e9ed;\r\n          .index{\r\n            span{\r\n              display: none;\r\n            }\r\n            i{\r\n              display: block;\r\n            }\r\n          }\r\n        }\r\n        &:nth-child(odd){\r\n          background: #f7f7f7;\r\n        }\r\n        &.is-active{\r\n          .index{\r\n            span{\r\n              display: none;\r\n            }\r\n            .play-animation{\r\n              display: flex;\r\n              span{\r\n                display: block;\r\n              }\r\n            }\r\n          }\r\n          \r\n        }\r\n        &.is-active:hover{\r\n          .play-animation{\r\n            display: none;\r\n          }\r\n        }\r\n      }\r\n\r\n    } \r\n  }\r\n  .load-more{\r\n    margin-top: 20px;\r\n    .more{\r\n      @include flex;\r\n      padding: 10px;\r\n      span{\r\n        transform: translateX(-20px);\r\n        cursor: pointer;\r\n        &:hover{\r\n          color: $mainColor;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .error{\r\n      @include flex;\r\n      margin-top: 20px;\r\n  }\r\n  \r\n</style>"]}]}