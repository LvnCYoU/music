{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\src\\views\\video\\Index.vue?vue&type=style&index=0&id=3d76aaf4&lang=stylus&scoped=true&","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\src\\views\\video\\Index.vue","mtime":1600536934839},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouZmFkZS1lbnRlciB7DQogIG9wYWNpdHk6IDA7DQogIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMzBweCwgMCk7DQp9DQoNCi5mYWRlLWVudGVyLWFjdGl2ZSB7DQogIHRyYW5zaXRpb246IGFsbCAwLjVzOw0KfQ0KDQouZmFkZS1sZWF2ZS10byB7DQogIG9wYWNpdHk6IDA7DQogIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMzBweCwgMCk7DQp9DQoNCi5mYWRlLWxlYXZlLWFjdGl2ZSB7DQogIHRyYW5zaXRpb246IGFsbCAwLjVzOw0KfQ0KLnZpZGVvLXdyYXAgew0KICAuZmlsdGVyIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDQwcHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogICAgcGFkZGluZy1yaWdodDogMjBweDsNCiAgICBib3JkZXItcmFkaXVzOiA1cHggMHB4IDVweCA1cHg7DQoNCiAgICAudGl0bGUgew0KICAgICAgd2lkdGg6IGF1dG87DQogICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICBwYWRkaW5nOiAwIDVweCAwIDE1cHg7DQogICAgICBiYWNrZ3JvdW5kOiAkY29sb3ItdGhlbWU7DQogICAgICBib3JkZXItcmFkaXVzOiA1cHggMHB4IDVweCA1cHg7DQogICAgICBjb2xvcjogI2ZmZmZmZjsNCiAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgIG1hcmdpbi1yaWdodDogMTVweDsNCiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICY6OmFmdGVyIHsNCiAgICAgICAgY29udGVudDogJycNCiAgICAgICAgd2lkdGg6IDFweDsNCiAgICAgICAgaGVpZ2h0OiAyMHB4Ow0KICAgICAgICBtYXJnaW4tbGVmdDogMTJweDsNCiAgICAgICAgYmFja2dyb3VuZDogI2U3ZTdlNzsNCiAgICAgICAgb3BhY2l0eTogMDsNCiAgICAgIH0NCiAgICAgID4gaSB7DQogICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTsNCiAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogICAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICAgIH0NCg0KICAgICAgLmZpbHRlci1ib3ggew0KICAgICAgICB3aWR0aDogNzIwcHg7DQogICAgICAgIGhlaWdodDogNDAwcHg7DQogICAgICAgIG92ZXJmbG93LXk6IHNjcm9sbDsNCiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKTsNCiAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICBjb2xvcjogIzAwMDsNCiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICByaWdodDogLTYzMXB4Ow0KICAgICAgICB0b3A6IDUwcHg7DQogICAgICAgIHotaW5kZXg6IDEwMDsNCiAgICAgICAgcGFkZGluZzogMTVweCAxMHB4IDAgMTZweDsNCiAgICAgICAgdWwgew0KICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgZmxleC13cmFwOiB3cmFwOw0KICAgICAgICAgIGxpIHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxOHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y3ZjdmNzsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7DQogICAgICAgICAgICBtYXJnaW46IDAgMTBweCAxMHB4IDA7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAgICAgICBjb2xvcjogIzE2MWUyNzsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjRzOw0KICAgICAgICAgICAgJjpob3ZlciB7DQogICAgICAgICAgICAgIGNvbG9yOiAjZmZmOw0KICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAkY29sb3ItdGhlbWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAmLmFjdGl2ZSB7DQogICAgICAgICAgICAgIGNvbG9yOiAjZmZmOw0KICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAkY29sb3ItdGhlbWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgICY6aG92ZXIgew0KICAgICAgICAvLyBib3JkZXI6IDFweCBzb2xpZCAjY2NjY2NjOw0KICAgICAgfQ0KICAgIH0NCiAgICAuaG90LXRhZyB7DQogICAgICBmbGV4OiAxOw0KICAgICAgdWwgew0KICAgICAgICBsaSB7DQogICAgICAgICAgbWFyZ2luOiAwIDVweDsNCiAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4Ow0KICAgICAgICAgIGN1cnNvcjogcG9pbnRlcg0KICAgICAgICAgICY6aG92ZXIgew0KICAgICAgICAgICAgY29sb3I6ICM4ODg7DQogICAgICAgICAgfQ0KICAgICAgICAgICYuYWN0aXZlIHsNCiAgICAgICAgICAgIGNvbG9yOiAkY29sb3ItdGhlbWU7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIC5hbGwgew0KICAgICAgYmFja2dyb3VuZDogI2Y3ZjdmNzsNCiAgICAgIGNvbG9yOiAjMTYxZTI3Ow0KICAgICAgcGFkZGluZzogNXB4IDEwcHg7DQogICAgICBmb250LXNpemU6IDEycHg7DQogICAgICBib3JkZXItcmFkaXVzOiAzcHg7DQogICAgICB0cmFuc2l0aW9uOiBhbGwgMC40czsNCiAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICYuYWN0aXZlIHsNCiAgICAgICAgYmFja2dyb3VuZDogJGNvbG9yLXRoZW1lOw0KICAgICAgICBjb2xvcjogI2ZmZjsNCiAgICAgIH0NCiAgICB9DQogIH0NCiAgLnBhZ2Ugew0KICAgIC5idG4gew0KICAgICAgcGFkZGluZzogN3B4IDEwcHg7DQogICAgICBib3JkZXItcmFkaXVzOiAzcHg7DQogICAgICBiYWNrZ3JvdW5kOiAkY29sb3ItdGhlbWU7DQogICAgICBjb2xvcjogI2ZmZmZmZjsNCiAgICAgIG1hcmdpbjogMCAxMHB4Ow0KICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgYm9yZGVyOiAwOw0KICAgICAgJi5hY3RpdmUgew0KICAgICAgICBiYWNrZ3JvdW5kOiAkY29sb3ItdGhlbWU7DQogICAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgfQ0KICAgICAgJjpob3ZlciB7DQogICAgICAgIGJhY2tncm91bmQ6ICRjb2xvci10aGVtZTsNCiAgICAgICAgY29sb3I6ICNmZmZmZmY7DQogICAgICB9DQogICAgICAmOmRpc2FibGVkIHsNCiAgICAgICAgY29sb3I6ICNmZmY7DQogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmYWI2YjY7DQogICAgICAgIGJvcmRlci1jb2xvcjogI2ZhYjZiNjsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkOA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/video","sourcesContent":["<template>\r\n  <div class=\"video-wrap container\">\r\n    <div class=\"filter shadow\">\r\n      <div class=\"title flex-center\" @click=\"openFilter\">\r\n        {{ currentCat }}\r\n        <i class=\"iconfont niceiconfontyoujiantou-copy-copy-copy-copy\"></i>\r\n        <transition name=\"fade\">\r\n          <div class=\"filter-box shadow\" v-if=\"showFilter\">\r\n            <ul>\r\n              <li\r\n                v-for=\"item of tags\"\r\n                :key=\"item.id\"\r\n                :class=\"currentCat == item.name ? 'active' : ''\"\r\n                @click=\"chooseCat(item.id, item.name)\"\r\n              >\r\n                {{ item.name }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n      <div class=\"hot-tag flex-row\">\r\n        <p>分类：</p>\r\n        <ul class=\"flex-center\">\r\n          <li\r\n            v-for=\"item of hotCategories\"\r\n            :key=\"item.id\"\r\n            :class=\"currentCat == item.name ? 'active' : ''\"\r\n            @click=\"chooseCat(item.id, item.name)\"\r\n          >\r\n            {{ item.name }}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div\r\n        class=\"all\"\r\n        :class=\"currentCat == '全部' ? 'active' : ''\"\r\n        @click=\"chooseCat('', '全部')\"\r\n      >\r\n        全部\r\n      </div>\r\n    </div>\r\n    <mv-list :mvs=\"videos\" v-loading=\"fullscreenLoading\"></mv-list>\r\n    <div class=\"page flex-center\">\r\n      <button\r\n        :disabled=\"offset == 0\"\r\n        class=\"btn flex-center trainsition\"\r\n        @click=\"prev\"\r\n      >\r\n        上一页\r\n      </button>\r\n      <button\r\n        :disabled=\"!hasmore\"\r\n        class=\"btn flex-center trainsition\"\r\n        @click=\"next\"\r\n      >\r\n        下一页\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createVideo } from '@/model/video'\r\nimport MvList from 'components/common/mvList/Index'\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentCat: '全部',\r\n      currentId: '',\r\n      hotCategories: [],\r\n      tags: [],\r\n      videos: [],\r\n      offset: 0,\r\n      hasmore: true,\r\n      showFilter: false,\r\n      fullscreenLoading: false\r\n    }\r\n  },\r\n  components: {\r\n    MvList\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  methods: {\r\n    // 展开视频标签\r\n    openFilter() {\r\n      this.showFilter = !this.showFilter\r\n    },\r\n    // 下一页\r\n    next() {\r\n      this.offset += 1\r\n      if (this.currentId) {\r\n        this.getVideoOther(this.currentId)\r\n      } else {\r\n        this.getVideoAll()\r\n      }\r\n    },\r\n    // 上一页\r\n    prev() {\r\n      this.offset -= 1\r\n      if (this.currentId) {\r\n        this.getVideoOther(this.currentId)\r\n      } else {\r\n        this.getVideoAll()\r\n      }\r\n    },\r\n    // 获取视频分类列表\r\n    async getVideoCategory() {\r\n      try {\r\n        let res = await this.$api.getVideoCategory()\r\n        if (res.code === 200) {\r\n          let list = res.data.filter(item => {\r\n            return item.id !== 1000\r\n          })\r\n          this.hotCategories = list\r\n        }\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n    // 获取视频标签列表\r\n    async getVideoTag() {\r\n      try {\r\n        let res = await this.$api.getVideoTag()\r\n        if (res.code === 200) {\r\n          let list = res.data.filter(item => {\r\n            return item.id !== 1000\r\n          })\r\n          this.tags = list\r\n        }\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n    // 获取全部视频列表\r\n    async getVideoAll() {\r\n      this.fullscreenLoading = true\r\n      try {\r\n        let res = await this.$api.getVideoAll(this.offset)\r\n        if (res.code === 200) {\r\n          this.videos = this._normalizeVideos(res.datas)\r\n          this.fullscreenLoading = false\r\n          if (res.hasmore) {\r\n            this.hasmore = true\r\n          } else {\r\n            this.hasmore = false\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n    // 获取视频标签/分类下的视频\r\n    async getVideoOther(id) {\r\n      try {\r\n        let res = await this.$api.getVideoOther(id, this.offset)\r\n        if (res.code === 200) {\r\n          this.videos = this._normalizeVideos(res.datas)\r\n          if (res.hasmore) {\r\n            this.hasmore = true\r\n          } else {\r\n            this.hasmore = false\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n    // 处理视频\r\n    _normalizeVideos(list) {\r\n      let ret = []\r\n      list.map(item => {\r\n        let res = item.data\r\n        let liveRes = item.data.liveData\r\n        if (res.vid) {\r\n          ret.push(\r\n            createVideo({\r\n              id: res.vid,\r\n              nickName: res.creator.nickname,\r\n              name: res.title,\r\n              playCount: res.playTime,\r\n              duration: res.durationms,\r\n              image: res.coverUrl,\r\n              isLive: false\r\n            })\r\n          )\r\n        } else {\r\n          ret.push(\r\n            createVideo({\r\n              id: liveRes.liveRoom.liveRoomNo,\r\n              nickName: liveRes.liveUser.nickName,\r\n              name: liveRes.liveRoom.title,\r\n              playCount: liveRes.liveRoom.popularity,\r\n              duration:\r\n                liveRes.liveRoom.liveStatus == 1 ? '正在直播' : '直播已关闭',\r\n              image: liveRes.liveRoom.coverUrl,\r\n              isLive: true\r\n            })\r\n          )\r\n        }\r\n      })\r\n      return ret\r\n    },\r\n    // 选择分类\r\n    chooseCat(id, name) {\r\n      this.offset = 0\r\n      this.hasmore = true\r\n      this.currentCat = name\r\n      if (id) {\r\n        this.currentId = id\r\n        this.getVideoOther(id)\r\n      } else {\r\n        this.getVideoAll()\r\n      }\r\n    }\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    this.getVideoCategory()\r\n    this.getVideoTag()\r\n    this.getVideoAll()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n.fade-enter {\r\n  opacity: 0;\r\n  transform: translate3d(0, 30px, 0);\r\n}\r\n\r\n.fade-enter-active {\r\n  transition: all 0.5s;\r\n}\r\n\r\n.fade-leave-to {\r\n  opacity: 0;\r\n  transform: translate3d(0, 30px, 0);\r\n}\r\n\r\n.fade-leave-active {\r\n  transition: all 0.5s;\r\n}\r\n.video-wrap {\r\n  .filter {\r\n    width: 100%;\r\n    height: 40px;\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 20px;\r\n    padding-right: 20px;\r\n    border-radius: 5px 0px 5px 5px;\r\n\r\n    .title {\r\n      width: auto;\r\n      height: 100%;\r\n      padding: 0 5px 0 15px;\r\n      background: $color-theme;\r\n      border-radius: 5px 0px 5px 5px;\r\n      color: #ffffff;\r\n      cursor: pointer;\r\n      position: relative;\r\n      margin-right: 15px;\r\n      position: relative;\r\n      &::after {\r\n        content: ''\r\n        width: 1px;\r\n        height: 20px;\r\n        margin-left: 12px;\r\n        background: #e7e7e7;\r\n        opacity: 0;\r\n      }\r\n      > i {\r\n        transform: rotate(90deg);\r\n        margin-left: 10px;\r\n        font-size: 18px;\r\n      }\r\n\r\n      .filter-box {\r\n        width: 720px;\r\n        height: 400px;\r\n        overflow-y: scroll;\r\n        background: rgba(255, 255, 255, 1);\r\n        border-radius: 5px;\r\n        color: #000;\r\n        position: absolute;\r\n        right: -631px;\r\n        top: 50px;\r\n        z-index: 100;\r\n        padding: 15px 10px 0 16px;\r\n        ul {\r\n          display: flex;\r\n          flex-wrap: wrap;\r\n          li {\r\n            padding: 8px 18px;\r\n            background: #f7f7f7;\r\n            border-radius: 16px;\r\n            margin: 0 10px 10px 0;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n            color: #161e27;\r\n            transition: all 0.4s;\r\n            &:hover {\r\n              color: #fff;\r\n              background: $color-theme;\r\n            }\r\n            &.active {\r\n              color: #fff;\r\n              background: $color-theme;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      &:hover {\r\n        // border: 1px solid #cccccc;\r\n      }\r\n    }\r\n    .hot-tag {\r\n      flex: 1;\r\n      ul {\r\n        li {\r\n          margin: 0 5px;\r\n          padding-right: 10px;\r\n          cursor: pointer\r\n          &:hover {\r\n            color: #888;\r\n          }\r\n          &.active {\r\n            color: $color-theme;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .all {\r\n      background: #f7f7f7;\r\n      color: #161e27;\r\n      padding: 5px 10px;\r\n      font-size: 12px;\r\n      border-radius: 3px;\r\n      transition: all 0.4s;\r\n      cursor: pointer;\r\n      &.active {\r\n        background: $color-theme;\r\n        color: #fff;\r\n      }\r\n    }\r\n  }\r\n  .page {\r\n    .btn {\r\n      padding: 7px 10px;\r\n      border-radius: 3px;\r\n      background: $color-theme;\r\n      color: #ffffff;\r\n      margin: 0 10px;\r\n      cursor: pointer;\r\n      border: 0;\r\n      &.active {\r\n        background: $color-theme;\r\n        color: #ffffff;\r\n      }\r\n      &:hover {\r\n        background: $color-theme;\r\n        color: #ffffff;\r\n      }\r\n      &:disabled {\r\n        color: #fff;\r\n        background-color: #fab6b6;\r\n        border-color: #fab6b6;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}