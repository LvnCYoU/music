{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\src\\views\\search\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\src\\views\\search\\Index.vue","mtime":1600536934834},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBjcmVhdGVTb25nIH0gZnJvbSAnQC9tb2RlbC9zb25nJw0KaW1wb3J0IHsgY3JlYXRlVmlkZW8gfSBmcm9tICdAL21vZGVsL3ZpZGVvJw0KaW1wb3J0IEFydGlzdExpc3QgZnJvbSAnY29tcG9uZW50cy9jb21tb24vYXJ0aXN0TGlzdC9JbmRleCcNCmltcG9ydCBTaW5nZXJJdGVtIGZyb20gJ2NvbXBvbmVudHMvY29tbW9uL3Npbmdlckl0ZW0vSW5kZXgnDQppbXBvcnQgQWxidW1MaXN0IGZyb20gJ2NvbXBvbmVudHMvY29tbW9uL2FsYnVtTGlzdC9JbmRleCcNCmltcG9ydCBNdkxpc3QgZnJvbSAnY29tcG9uZW50cy9jb21tb24vbXZMaXN0L0luZGV4Jw0KaW1wb3J0IHNvbmdTaGVldCBmcm9tICdjb21wb25lbnRzL2NvbW1vbi9zb25nU2hlZXQvSW5kZXgnDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGtleXdvcmQ6ICcnLA0KICAgICAgc2VhcmNoUmVzdWx0OiB7fSwNCiAgICAgIGxpbWl0OiAzMCwNCiAgICAgIG9mZnNldDogMCwNCiAgICAgIHR5cGU6IDEsDQogICAgICBpc1BlcnNvbjogdHJ1ZSwNCiAgICAgIHNvbmdzOiBbXSwNCiAgICAgIHNpbmdlcnM6IFtdLA0KICAgICAgYWxidW1zOiBbXSwNCiAgICAgIHZpZGVvczogW10sDQogICAgICBwbGF5TGlzdDogW10sDQogICAgICBsb2FkaW5nOiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIEFydGlzdExpc3QsDQogICAgU2luZ2VySXRlbSwNCiAgICBBbGJ1bUxpc3QsDQogICAgTXZMaXN0LA0KICAgIHNvbmdTaGVldA0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGlzS2V5d29yZCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmtleXdvcmQuc3BsaXQoJyAnKS5qb2luKCcnKS5sZW5ndGggPT0gMA0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBrZXl3b3JkKG5ld1ZhbCwgb2xkVmFsKSB7DQogICAgICBjb25zb2xlLmxvZyhuZXdWYWwsIG9sZFZhbCkNCiAgICAgIGlmICh0aGlzLnRpbWVyKSB7DQogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKQ0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLmtleXdvcmQgfHwgdGhpcy5rZXl3b3JkLnNwbGl0KCcgJykuam9pbignJykubGVuZ3RoID09IDApIHsNCiAgICAgICAgdGhpcy5zZWFyY2hSZXN1bHQgPSB7fQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgdGhpcy5zZWFyY2hTdWdnZXN0KCkNCiAgICAgICAgdGhpcy5zZWFyY2godGhpcy50eXBlKQ0KICAgICAgfSwgMTAwKQ0KICAgIH0sDQogICAgJHJvdXRlKG5ld09iaiwgb2xkT2JqKSB7DQogICAgICBpZihuZXdPYmoucXVlcnkua2V5d29yZCAhPT0gb2xkT2JqLnF1ZXJ5LmtleXdvcmQpIHsNCiAgICAgICAgdGhpcy5rZXl3b3JkID0gbmV3T2JqLnF1ZXJ5LmtleXdvcmQNCiAgICAgICAgdGhpcy5zZWFyY2goMSkNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDmm7TmlLnmkJzntKLnsbvlnosNCiAgICBjaGFuZ2VUeXBlKHR5cGUpIHsNCiAgICAgIHRoaXMudHlwZSA9IHR5cGUNCiAgICAgIHRoaXMuc2VhcmNoKHR5cGUpDQogICAgfSwNCiAgICAvLyDmkJzntKLlu7rorq4NCiAgICBhc3luYyBzZWFyY2hTdWdnZXN0KCkgew0KICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5zZWFyY2hTdWdnZXN0KHRoaXMua2V5d29yZCkNCiAgICAgIC8vIGNvbnNvbGUubG9nKHJlcykNCiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShyZXMucmVzdWx0KSAhPT0gJ3t9Jykgew0KICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdCA9IHJlcy5yZXN1bHQNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOaQnOe0og0KICAgIHNlYXJjaCh0eXBlKSB7DQogICAgICB0aGlzLiRhcGkNCiAgICAgICAgLnNlYXJjaCh0aGlzLmtleXdvcmQsIHRoaXMubGltaXQsIHRoaXMub2Zmc2V0LCB0eXBlKQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsNCiAgICAgICAgICAgICAgY2FzZSAxOiB7DQogICAgICAgICAgICAgICAgbGV0IGxpc3RzID0gcmVzLnJlc3VsdC5zb25ncw0KICAgICAgICAgICAgICAgIGxldCBzbGljZUFyciA9IFtdDQogICAgICAgICAgICAgICAgbGlzdHMubWFwKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgc2xpY2VBcnIucHVzaChpdGVtLmlkKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgdGhpcy5nZXRTb25nRGV0YWlsKHNsaWNlQXJyKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgY2FzZSAxMDA6IHsNCiAgICAgICAgICAgICAgICB0aGlzLnNpbmdlcnMgPSByZXMucmVzdWx0LmFydGlzdHMNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGNhc2UgMTA6IHsNCiAgICAgICAgICAgICAgICB0aGlzLmFsYnVtcyA9IHJlcy5yZXN1bHQuYWxidW1zDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBjYXNlIDEwMTQ6IHsNCiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvcyA9IHRoaXMuX25vcm1hbGl6ZVZpZGVvcyhyZXMucmVzdWx0LnZpZGVvcykNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGNhc2UgMTAwMDogew0KICAgICAgICAgICAgICAgIHRoaXMucGxheUxpc3QgPSByZXMucmVzdWx0LnBsYXlsaXN0cw0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgZGVmYXVsdDogew0KICAgICAgICAgICAgICAgIGxldCBsaXN0cyA9IHJlcy5yZXN1bHQuc29uZ3MNCiAgICAgICAgICAgICAgICBsZXQgc2xpY2VBcnIgPSBbXQ0KICAgICAgICAgICAgICAgIGxpc3RzLm1hcChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAgIHNsaWNlQXJyLnB1c2goaXRlbS5pZCkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0U29uZ0RldGFpbChzbGljZUFycikNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIH0pDQogICAgfSwNCiAgICAvLyDojrflj5bmrYzmm7LliJfooagNCiAgICBhc3luYyBnZXRTb25nRGV0YWlsKHNsaWNlQXJyKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgICBsZXQgdGltZXN0YW1wID0gbmV3IERhdGUoKS52YWx1ZU9mKCkNCiAgICAgIGxldCBpZHMgPSBzbGljZUFyci5qb2luKCcsJykNCiAgICAgIHRyeSB7DQogICAgICAgIGxldCBiZWZvcmVSZXMgPSBhd2FpdCB0aGlzLiRhcGkuZ2V0U29uZ0RldGFpbChpZHMsIHRpbWVzdGFtcCkNCiAgICAgICAgbGV0IHJlcyA9IGJlZm9yZVJlcy5zb25ncw0KICAgICAgICB0aGlzLnNvbmdzID0gdGhpcy5fbm9ybWFsaXplU29uZ3MocmVzKQ0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICB9DQogICAgfSwNCiAgICAvLyDlpITnkIbmrYzmm7INCiAgICBfbm9ybWFsaXplU29uZ3MobGlzdCkgew0KICAgICAgbGV0IHJldCA9IFtdDQogICAgICBsaXN0Lm1hcChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uaWQpIHsNCiAgICAgICAgICByZXQucHVzaChjcmVhdGVTb25nKGl0ZW0pKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcmV0dXJuIHJldA0KICAgIH0sDQogICAgLy8g5aSE55CG6KeG6aKRDQogICAgX25vcm1hbGl6ZVZpZGVvcyhsaXN0KSB7DQogICAgICBsZXQgcmV0ID0gW10NCiAgICAgIGxpc3QubWFwKGl0ZW0gPT4gew0KICAgICAgICBpZiAoaXRlbS52aWQpIHsNCiAgICAgICAgICByZXQucHVzaCgNCiAgICAgICAgICAgIGNyZWF0ZVZpZGVvKHsNCiAgICAgICAgICAgICAgaWQ6IGl0ZW0udmlkLA0KICAgICAgICAgICAgICBuaWNrTmFtZTogaXRlbS5jcmVhdG9yLm5pY2tuYW1lLA0KICAgICAgICAgICAgICBuYW1lOiBpdGVtLnRpdGxlLA0KICAgICAgICAgICAgICBwbGF5Q291bnQ6IGl0ZW0ucGxheVRpbWUsDQogICAgICAgICAgICAgIGR1cmF0aW9uOiBpdGVtLmR1cmF0aW9ubXMsDQogICAgICAgICAgICAgIGltYWdlOiBpdGVtLmNvdmVyVXJsLA0KICAgICAgICAgICAgICBpc0xpdmU6IGZhbHNlDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHJldHVybiByZXQNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7fSwNCiAgbW91bnRlZCgpIHsNCiAgICBsZXQga2V5d29yZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmtleXdvcmQNCiAgICBpZiAoa2V5d29yZCkgew0KICAgICAgdGhpcy5rZXl3b3JkID0ga2V5d29yZA0KICAgICAgdGhpcy5zZWFyY2goMSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/search","sourcesContent":["<template>\r\n  <div class=\"search-wrap\">\r\n    <div class=\"banner layer\">\r\n      <div class=\"search-inner\">\r\n        <div class=\"search-box flex-row\">\r\n          <input\r\n            v-model=\"keyword\"\r\n            maxlength=\"128\"\r\n            type=\"text\"\r\n            placeholder=\"搜索音乐/MV/歌单/歌手\"\r\n            class=\"search\"\r\n          />\r\n          <i class=\"iconfont nicesearch-o search-icon\" @click=\"search(1)\"></i>\r\n        </div>\r\n        <div\r\n          class=\"list\"\r\n          :class=\"!isKeyword ? 'hot' : ''\"\r\n          style=\"display: none;\"\r\n        >\r\n          <div\r\n            class=\"item\"\r\n            v-if=\"searchResult.songs && searchResult.songs.length > 0\"\r\n          >\r\n            <div class=\"title flex-row\">\r\n              <i class=\"iconfont niceyinfu3\"></i> 单曲\r\n            </div>\r\n            <ul>\r\n              <li v-for=\"item of searchResult.songs\" :key=\"item.id\">\r\n                {{ item.name }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div\r\n            class=\"item\"\r\n            v-if=\"searchResult.artists && searchResult.artists.length > 0\"\r\n          >\r\n            <div class=\"title flex-row\">\r\n              <i class=\"iconfont niceicon-4\"></i> 歌手\r\n            </div>\r\n            <ul>\r\n              <li v-for=\"item of searchResult.artists\" :key=\"item.id\">\r\n                {{ item.name }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div\r\n            class=\"item\"\r\n            v-if=\"searchResult.albums && searchResult.albums.length > 0\"\r\n          >\r\n            <div class=\"title flex-row\">\r\n              <i class=\"iconfont niceRaidobox-selectedRai1\"></i> 专辑\r\n            </div>\r\n            <ul>\r\n              <li v-for=\"item of searchResult.albums\" :key=\"item.id\">\r\n                {{ item.name }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div\r\n            class=\"item\"\r\n            v-if=\"searchResult.playlists && searchResult.playlists.length > 0\"\r\n          >\r\n            <div class=\"title flex-row\">\r\n              <i\r\n                class=\"iconfont nicebofangliebiao24\"\r\n                style=\"font-size: 20px;\"\r\n              ></i>\r\n              歌单\r\n            </div>\r\n            <ul>\r\n              <li v-for=\"item of searchResult.playlists\" :key=\"item.id\">\r\n                {{ item.name }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"main container\">\r\n      <div class=\"tab flex-row\">\r\n        <h2>搜索结果</h2>\r\n        <a :class=\"type === 1 ? 'active' : ''\" @click=\"changeType(1)\">单曲</a>\r\n        <a :class=\"type === 100 ? 'active' : ''\" @click=\"changeType(100)\"\r\n          >歌手</a\r\n        >\r\n        <a :class=\"type === 10 ? 'active' : ''\" @click=\"changeType(10)\">专辑</a>\r\n        <a :class=\"type === 1014 ? 'active' : ''\" @click=\"changeType(1014)\"\r\n          >视频</a\r\n        >\r\n        <a :class=\"type === 1000 ? 'active' : ''\" @click=\"changeType(1000)\"\r\n          >歌单</a\r\n        >\r\n      </div>\r\n      <div class=\"content\">\r\n        <artist-list :songs=\"songs\" :isPerson=\"isPerson\" v-if=\"type === 1\" v-loading=\"loading\" />\r\n        <ul class=\"singer-list\" v-if=\"type === 100\">\r\n          <singer-item v-for=\"item of singers\" :key=\"item.id\" :item=\"item\" />\r\n        </ul>\r\n        <album-list :albums=\"albums\" v-if=\"type == 10\" />\r\n        <mv-list :mvs=\"videos\" v-if=\"type == 1014\"></mv-list>\r\n        <song-sheet :sheetList=\"playList\" v-if=\"type == 1000\"></song-sheet>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createSong } from '@/model/song'\r\nimport { createVideo } from '@/model/video'\r\nimport ArtistList from 'components/common/artistList/Index'\r\nimport SingerItem from 'components/common/singerItem/Index'\r\nimport AlbumList from 'components/common/albumList/Index'\r\nimport MvList from 'components/common/mvList/Index'\r\nimport songSheet from 'components/common/songSheet/Index'\r\nexport default {\r\n  data() {\r\n    return {\r\n      keyword: '',\r\n      searchResult: {},\r\n      limit: 30,\r\n      offset: 0,\r\n      type: 1,\r\n      isPerson: true,\r\n      songs: [],\r\n      singers: [],\r\n      albums: [],\r\n      videos: [],\r\n      playList: [],\r\n      loading: false\r\n    }\r\n  },\r\n  components: {\r\n    ArtistList,\r\n    SingerItem,\r\n    AlbumList,\r\n    MvList,\r\n    songSheet\r\n  },\r\n  computed: {\r\n    isKeyword() {\r\n      return this.keyword.split(' ').join('').length == 0\r\n    }\r\n  },\r\n  watch: {\r\n    keyword(newVal, oldVal) {\r\n      console.log(newVal, oldVal)\r\n      if (this.timer) {\r\n        clearTimeout(this.timer)\r\n      }\r\n      if (!this.keyword || this.keyword.split(' ').join('').length == 0) {\r\n        this.searchResult = {}\r\n        return\r\n      }\r\n      this.timer = setTimeout(() => {\r\n        this.searchSuggest()\r\n        this.search(this.type)\r\n      }, 100)\r\n    },\r\n    $route(newObj, oldObj) {\r\n      if(newObj.query.keyword !== oldObj.query.keyword) {\r\n        this.keyword = newObj.query.keyword\r\n        this.search(1)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 更改搜索类型\r\n    changeType(type) {\r\n      this.type = type\r\n      this.search(type)\r\n    },\r\n    // 搜索建议\r\n    async searchSuggest() {\r\n      let res = await this.$api.searchSuggest(this.keyword)\r\n      // console.log(res)\r\n      if (JSON.stringify(res.result) !== '{}') {\r\n        this.searchResult = res.result\r\n      }\r\n    },\r\n    // 搜索\r\n    search(type) {\r\n      this.$api\r\n        .search(this.keyword, this.limit, this.offset, type)\r\n        .then(res => {\r\n          if (res.code === 200) {\r\n            switch (type) {\r\n              case 1: {\r\n                let lists = res.result.songs\r\n                let sliceArr = []\r\n                lists.map(item => {\r\n                  sliceArr.push(item.id)\r\n                })\r\n                this.getSongDetail(sliceArr)\r\n                break\r\n              }\r\n              case 100: {\r\n                this.singers = res.result.artists\r\n                break\r\n              }\r\n              case 10: {\r\n                this.albums = res.result.albums\r\n                break\r\n              }\r\n              case 1014: {\r\n                this.videos = this._normalizeVideos(res.result.videos)\r\n                break\r\n              }\r\n              case 1000: {\r\n                this.playList = res.result.playlists\r\n                break\r\n              }\r\n              default: {\r\n                let lists = res.result.songs\r\n                let sliceArr = []\r\n                lists.map(item => {\r\n                  sliceArr.push(item.id)\r\n                })\r\n                this.getSongDetail(sliceArr)\r\n                break\r\n              }\r\n            }\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    // 获取歌曲列表\r\n    async getSongDetail(sliceArr) {\r\n      this.loading = true\r\n      let timestamp = new Date().valueOf()\r\n      let ids = sliceArr.join(',')\r\n      try {\r\n        let beforeRes = await this.$api.getSongDetail(ids, timestamp)\r\n        let res = beforeRes.songs\r\n        this.songs = this._normalizeSongs(res)\r\n        this.loading = false\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    },\r\n    // 处理歌曲\r\n    _normalizeSongs(list) {\r\n      let ret = []\r\n      list.map(item => {\r\n        if (item.id) {\r\n          ret.push(createSong(item))\r\n        }\r\n      })\r\n      return ret\r\n    },\r\n    // 处理视频\r\n    _normalizeVideos(list) {\r\n      let ret = []\r\n      list.map(item => {\r\n        if (item.vid) {\r\n          ret.push(\r\n            createVideo({\r\n              id: item.vid,\r\n              nickName: item.creator.nickname,\r\n              name: item.title,\r\n              playCount: item.playTime,\r\n              duration: item.durationms,\r\n              image: item.coverUrl,\r\n              isLive: false\r\n            })\r\n          )\r\n        }\r\n      })\r\n      return ret\r\n    }\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    let keyword = this.$route.query.keyword\r\n    if (keyword) {\r\n      this.keyword = keyword\r\n      this.search(1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n.search-wrap {\r\n  margin-top: -20px;\r\n  .banner {\r\n    width: 100%;\r\n    height: 250px;\r\n    background: url(../../assets/images/personal.jpg);\r\n    background-position: center;\r\n    background-size: cover;\r\n    background-attachment: fixed;\r\n    .search-inner {\r\n      width: 720px;\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%,-50%);\r\n      .search-box {\r\n        position: relative;\r\n        z-index: 10;\r\n        padding-left: 8px;\r\n        border-radius: 2px;\r\n        background: #f5f5f5;\r\n        input {\r\n          display: inline-block;\r\n          height: 54px;\r\n          flex: 1;\r\n          line-height: 54px;\r\n          border: none;\r\n          margin-right: 24px;\r\n          padding-left: 10px;\r\n          background: #f5f5f5;\r\n        }\r\n        .search-icon {\r\n          font-size: 20px;\r\n          padding: 16px;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n      .list {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        background: #fff;\r\n        padding: 18px 0 15px;\r\n        transition-property: top;\r\n        transition-duration: .2s;\r\n        transition-timing-function: ease-in-out;\r\n        opacity: 0;\r\n        z-index: 0;\r\n        box-shadow: 0 10px 30px 0 rgba(65,67,70,.08);\r\n        border-radius: 4px;\r\n        &.hot {\r\n          top: 110%;\r\n          opacity: 1;\r\n        }\r\n        .item {\r\n          .title {\r\n            height: 30px;\r\n            padding: 0 18px;\r\n            font-size: 12px;\r\n            color: #909399;\r\n            line-height: 30px;\r\n            i {\r\n              font-size: 18px;\r\n              margin-right: 5px;\r\n              font-weight: bold;\r\n              color: $color-theme;\r\n            }\r\n          }\r\n        }\r\n        ul {\r\n          li {\r\n            height: 38px;\r\n            line-height: 38px;\r\n            padding: 0 18px;\r\n            font-weight: 300;\r\n            background: #ffffff;\r\n            transition: background 0.1s;\r\n            cursor: pointer;\r\n            &:hover {\r\n              background: #f5f5f5;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .main {\r\n    .tab {\r\n      display: flex;\r\n      align-items: baseline;\r\n      margin-top: 43px;\r\n      margin-bottom: 42px;\r\n      h2 {\r\n        font-size: 22px;\r\n        font-weight: 600;\r\n        line-height: 30px;\r\n        margin-right: 40px;\r\n      }\r\n      a {\r\n        position: relative;\r\n        display: inline-block;\r\n        height: 20px;\r\n        line-height: 20px;\r\n        margin-right: 34px;\r\n        font-weight: 300;\r\n        color: #333;\r\n        z-index: 1;\r\n        cursor: pointer;\r\n        &.active {\r\n          &::after {\r\n            position: absolute;\r\n            content: \"\";\r\n            left: 0;\r\n            bottom: 1px;\r\n            width: 100%;\r\n            height: 6px;\r\n            background: $color-theme;\r\n            opacity: 0.5;\r\n            z-index: -1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .content {\r\n      .singer-list {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        margin-top: 30px;\r\n        margin: 30px -15px 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}