{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\input\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\input\\index.vue","mtime":1605291899719},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKXsNCiAgICByZXR1cm57DQogICAgICBzZWFyY2g6ICcnLA0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIHJlY29tbWVuZFNlYXJjaChzdHIsY2Ipew0KICAgICAgYXdhaXQgdGhpcy4kYXBpLlNlYXJjaFN1Z2dlc3Qoc3RyKQ0KICAgICAgICAudGhlbiggcmVzID0+IHsNCiAgICAgICAgICBsZXQgYXJyLGl0ZW0gPSBbXTsNCiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLnJlc3VsdDsNCiAgICAgICAgICBsZXQgYWN0aW9uID0gbmV3IE1hcChbDQogICAgICAgICAgICBbJ3NvbmdzJywoKSA9PiAxXSwNCiAgICAgICAgICAgIFsnYWxidW1zJywoKSA9PiAxMF0sDQogICAgICAgICAgICBbJ2FydGlzdHMnLCgpID0+IDEwMF0sDQogICAgICAgICAgICBbJ3BsYXlsaXN0cycsKCkgPT4gMTAwMF0sDQogICAgICAgICAgICBbJ2RlZmF1bHQnLCAoKSA9PiAxXSwNCiAgICAgICAgICBdKQ0KICAgICAgICAgIGFyciA9IGRhdGEub3JkZXI7DQogICAgICAgICAgYXJyLm1hcCggbGlzdCA9PiB7DQogICAgICAgICAgICBkYXRhW2xpc3RdLm1hcCggdHlwZSA9PiB7DQogICAgICAgICAgICAgIHR5cGUudHlwZSA9IA0KICAgICAgICAgICAgICAgIGFjdGlvbi5nZXQobGlzdCkuY2FsbCh0aGlzKSB8fCANCiAgICAgICAgICAgICAgICBhY3Rpb24uZ2V0KCdkZWZhdWx0JykuY2FsbCh0aGlzKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICBpdGVtLnB1c2goLi4uZGF0YVtsaXN0XSkNCiAgICAgICAgICB9KQ0KICAgICAgICAgIGNiKGl0ZW0pDQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCggKCkgPT4gew0KICAgICAgICAgIHJldHVybiA7DQogICAgICAgIH0pDQogICAgfSwNCg0KICAgIC8vIOi3s+i9rOiHs+aQnOe0oueVjOmdog0KICAgIGdvU2VhcmNoKGRhdGEpew0KICAgICAgaWYoIXRoaXMuc2VhcmNoKSByZXR1cm47DQogICAgICBjb25zb2xlLmxvZyhkYXRhKQ0KICAgICAgbGV0IGtleXdvcmRzID0gZGF0YS5uYW1lIHx8IHRoaXMuc2VhcmNoOw0KICAgICAgbGV0IHR5cGU7DQogICAgICBpZighZGF0YS5uYW1lKXsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdzZWFyY2gnLHF1ZXJ5OiB7DQogICAgICAgICAga2V5d29yZHMsDQogICAgICAgICAgdHlwZTogMSwNCiAgICAgICAgfX0pDQogICAgICB9IGVsc2V7DQogICAgICAgIHR5cGUgPSBkYXRhLnR5cGU7DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnc2VhcmNoJyxxdWVyeTogew0KICAgICAgICAgIGtleXdvcmRzLA0KICAgICAgICAgIHR5cGUsDQogICAgICAgIH19KQ0KICAgICAgfQ0KICAgICAgdGhpcy5zZWFyY2ggPSAnJzsNCiAgICAgIHJldHVybiA7DQogICAgfSwNCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/common/input","sourcesContent":["<template>\r\n  <div class=\"input\">\r\n    <el-autocomplete \r\n      placeholder=\"请输入内容\"\r\n      v-model=\"search\"\r\n      :trigger-on-focus=\"false\"\r\n      :fetch-suggestions=\"recommendSearch\"\r\n      @select=\"goSearch\"\r\n      :select-when-unmatched=\"true\"\r\n    >\r\n      <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i>\r\n      <template slot-scope=\"{ item }\">\r\n        <div class=\"item\" :title=\"item.name\">\r\n          <span class=\"name\">{{ item.name }}</span>\r\n        </div>\r\n      </template>\r\n    </el-autocomplete>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    return{\r\n      search: '',\r\n    }\r\n  },\r\n  methods: {\r\n    async recommendSearch(str,cb){\r\n      await this.$api.SearchSuggest(str)\r\n        .then( res => {\r\n          let arr,item = [];\r\n          let data = res.data.result;\r\n          let action = new Map([\r\n            ['songs',() => 1],\r\n            ['albums',() => 10],\r\n            ['artists',() => 100],\r\n            ['playlists',() => 1000],\r\n            ['default', () => 1],\r\n          ])\r\n          arr = data.order;\r\n          arr.map( list => {\r\n            data[list].map( type => {\r\n              type.type = \r\n                action.get(list).call(this) || \r\n                action.get('default').call(this);\r\n            })\r\n            item.push(...data[list])\r\n          })\r\n          cb(item)\r\n        })\r\n        .catch( () => {\r\n          return ;\r\n        })\r\n    },\r\n\r\n    // 跳转至搜索界面\r\n    goSearch(data){\r\n      if(!this.search) return;\r\n      console.log(data)\r\n      let keywords = data.name || this.search;\r\n      let type;\r\n      if(!data.name){\r\n        this.$router.push({name: 'search',query: {\r\n          keywords,\r\n          type: 1,\r\n        }})\r\n      } else{\r\n        type = data.type;\r\n        this.$router.push({name: 'search',query: {\r\n          keywords,\r\n          type,\r\n        }})\r\n      }\r\n      this.search = '';\r\n      return ;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  ::v-deep.input{\r\n    padding-right: 40px;\r\n    width: 158px;\r\n    z-index: 9;\r\n    height: 100%;\r\n    .el-input input{\r\n      height: 100%;\r\n    }\r\n  }\r\n  .el-autocomplete-suggestion li{\r\n    .item{\r\n      @include ellipse;\r\n    }\r\n  }\r\n  .el-autocomplete{\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  \r\n</style>\r\n\r\n"]}]}