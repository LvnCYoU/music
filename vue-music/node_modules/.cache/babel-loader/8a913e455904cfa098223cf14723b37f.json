{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\input\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\input\\index.vue","mtime":1605291899719},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy96bHcxMi9EZXNrdG9wL3N0b3JlL3Z1ZS1tdXNpYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy96bHcxMi9EZXNrdG9wL3N0b3JlL3Z1ZS1tdXNpYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoOiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlY29tbWVuZFNlYXJjaDogZnVuY3Rpb24gcmVjb21tZW5kU2VhcmNoKHN0ciwgY2IpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGFwaS5TZWFyY2hTdWdnZXN0KHN0cikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIHZhciBhcnIsCiAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gW107CiAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEucmVzdWx0OwogICAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gbmV3IE1hcChbWydzb25ncycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgICAgICAgfV0sIFsnYWxidW1zJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAxMDsKICAgICAgICAgICAgICAgICAgfV0sIFsnYXJ0aXN0cycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTAwOwogICAgICAgICAgICAgICAgICB9XSwgWydwbGF5bGlzdHMnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEwMDA7CiAgICAgICAgICAgICAgICAgIH1dLCBbJ2RlZmF1bHQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICAgIH1dXSk7CiAgICAgICAgICAgICAgICAgIGFyciA9IGRhdGEub3JkZXI7CiAgICAgICAgICAgICAgICAgIGFyci5tYXAoZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgICAgICAgICAgICBkYXRhW2xpc3RdLm1hcChmdW5jdGlvbiAodHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgdHlwZS50eXBlID0gYWN0aW9uLmdldChsaXN0KS5jYWxsKF90aGlzKSB8fCBhY3Rpb24uZ2V0KCdkZWZhdWx0JykuY2FsbChfdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5wdXNoLmFwcGx5KGl0ZW0sIF90b0NvbnN1bWFibGVBcnJheShkYXRhW2xpc3RdKSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBjYihpdGVtKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDot7Povazoh7PmkJzntKLnlYzpnaIKICAgIGdvU2VhcmNoOiBmdW5jdGlvbiBnb1NlYXJjaChkYXRhKSB7CiAgICAgIGlmICghdGhpcy5zZWFyY2gpIHJldHVybjsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgIHZhciBrZXl3b3JkcyA9IGRhdGEubmFtZSB8fCB0aGlzLnNlYXJjaDsKICAgICAgdmFyIHR5cGU7CgogICAgICBpZiAoIWRhdGEubmFtZSkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdzZWFyY2gnLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAga2V5d29yZHM6IGtleXdvcmRzLAogICAgICAgICAgICB0eXBlOiAxCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdHlwZSA9IGRhdGEudHlwZTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAnc2VhcmNoJywKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIGtleXdvcmRzOiBrZXl3b3JkcywKICAgICAgICAgICAgdHlwZTogdHlwZQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLnNlYXJjaCA9ICcnOwogICAgICByZXR1cm47CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,MAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,2BACA,GADA,EACA,EADA,EACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,CAAA,IAAA,CAAA,aAAA,CAAA,GAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,sBAAA,GAAA;AAAA,sBAAA,IAAA,GAAA,EAAA;AACA,sBAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA;AACA,sBAAA,MAAA,GAAA,IAAA,GAAA,CAAA,CACA,CAAA,OAAA,EAAA;AAAA,2BAAA,CAAA;AAAA,mBAAA,CADA,EAEA,CAAA,QAAA,EAAA;AAAA,2BAAA,EAAA;AAAA,mBAAA,CAFA,EAGA,CAAA,SAAA,EAAA;AAAA,2BAAA,GAAA;AAAA,mBAAA,CAHA,EAIA,CAAA,WAAA,EAAA;AAAA,2BAAA,IAAA;AAAA,mBAAA,CAJA,EAKA,CAAA,SAAA,EAAA;AAAA,2BAAA,CAAA;AAAA,mBAAA,CALA,CAAA,CAAA;AAOA,kBAAA,GAAA,GAAA,IAAA,CAAA,KAAA;AACA,kBAAA,GAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,oBAAA,IAAA,CAAA,IAAA,CAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,sBAAA,IAAA,CAAA,IAAA,GACA,MAAA,CAAA,GAAA,CAAA,IAAA,EAAA,IAAA,CAAA,KAAA,KACA,MAAA,CAAA,GAAA,CAAA,SAAA,EAAA,IAAA,CAAA,KAAA,CAFA;AAGA,qBAJA;AAKA,oBAAA,IAAA,CAAA,IAAA,OAAA,IAAA,qBAAA,IAAA,CAAA,IAAA,CAAA,EAAA;AACA,mBAPA;AAQA,kBAAA,EAAA,CAAA,IAAA,CAAA;AACA,iBArBA,EAsBA,KAtBA,CAsBA,YAAA;AACA;AACA,iBAxBA,CADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0BA,KA3BA;AA6BA;AACA,IAAA,QA9BA,oBA8BA,IA9BA,EA8BA;AACA,UAAA,CAAA,KAAA,MAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,UAAA,QAAA,GAAA,IAAA,CAAA,IAAA,IAAA,KAAA,MAAA;AACA,UAAA,IAAA;;AACA,UAAA,CAAA,IAAA,CAAA,IAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA,QAAA;AAAA,UAAA,KAAA,EAAA;AACA,YAAA,QAAA,EAAA,QADA;AAEA,YAAA,IAAA,EAAA;AAFA;AAAA,SAAA;AAIA,OALA,MAKA;AACA,QAAA,IAAA,GAAA,IAAA,CAAA,IAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA,QAAA;AAAA,UAAA,KAAA,EAAA;AACA,YAAA,QAAA,EAAA,QADA;AAEA,YAAA,IAAA,EAAA;AAFA;AAAA,SAAA;AAIA;;AACA,WAAA,MAAA,GAAA,EAAA;AACA;AACA;AAjDA;AANA,CAAA","sourcesContent":["<template>\r\n  <div class=\"input\">\r\n    <el-autocomplete \r\n      placeholder=\"请输入内容\"\r\n      v-model=\"search\"\r\n      :trigger-on-focus=\"false\"\r\n      :fetch-suggestions=\"recommendSearch\"\r\n      @select=\"goSearch\"\r\n      :select-when-unmatched=\"true\"\r\n    >\r\n      <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i>\r\n      <template slot-scope=\"{ item }\">\r\n        <div class=\"item\" :title=\"item.name\">\r\n          <span class=\"name\">{{ item.name }}</span>\r\n        </div>\r\n      </template>\r\n    </el-autocomplete>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    return{\r\n      search: '',\r\n    }\r\n  },\r\n  methods: {\r\n    async recommendSearch(str,cb){\r\n      await this.$api.SearchSuggest(str)\r\n        .then( res => {\r\n          let arr,item = [];\r\n          let data = res.data.result;\r\n          let action = new Map([\r\n            ['songs',() => 1],\r\n            ['albums',() => 10],\r\n            ['artists',() => 100],\r\n            ['playlists',() => 1000],\r\n            ['default', () => 1],\r\n          ])\r\n          arr = data.order;\r\n          arr.map( list => {\r\n            data[list].map( type => {\r\n              type.type = \r\n                action.get(list).call(this) || \r\n                action.get('default').call(this);\r\n            })\r\n            item.push(...data[list])\r\n          })\r\n          cb(item)\r\n        })\r\n        .catch( () => {\r\n          return ;\r\n        })\r\n    },\r\n\r\n    // 跳转至搜索界面\r\n    goSearch(data){\r\n      if(!this.search) return;\r\n      console.log(data)\r\n      let keywords = data.name || this.search;\r\n      let type;\r\n      if(!data.name){\r\n        this.$router.push({name: 'search',query: {\r\n          keywords,\r\n          type: 1,\r\n        }})\r\n      } else{\r\n        type = data.type;\r\n        this.$router.push({name: 'search',query: {\r\n          keywords,\r\n          type,\r\n        }})\r\n      }\r\n      this.search = '';\r\n      return ;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  ::v-deep.input{\r\n    padding-right: 40px;\r\n    width: 158px;\r\n    z-index: 9;\r\n    height: 100%;\r\n    .el-input input{\r\n      height: 100%;\r\n    }\r\n  }\r\n  .el-autocomplete-suggestion li{\r\n    .item{\r\n      @include ellipse;\r\n    }\r\n  }\r\n  .el-autocomplete{\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  \r\n</style>\r\n\r\n"],"sourceRoot":"src/components/common/input"}]}