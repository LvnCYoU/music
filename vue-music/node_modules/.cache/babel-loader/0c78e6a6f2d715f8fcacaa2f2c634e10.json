{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\song-list\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\song-list\\index.vue","mtime":1605505082208},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOi9Vc2Vycy96bHcxMi9EZXNrdG9wL3N0b3JlL3Z1ZS1tdXNpYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgc29uZ0xpc3RzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZXJyb3I6IGZhbHNlLAogICAgICBtYXg6IDAKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZShbJ2F1ZGlvJywgJ3BsYXlTdGF0dXMnLCAncGxheWluZycsICdzb25nSWQnXSkpLCBtYXBHZXR0ZXJzKFsnZ2V0U29uZ0lkJywgJ2dldEN1cnJlbnRTb25nJywgJ2dldFBsYXlTdGF0dXMnXSkpLAogIHdhdGNoOiB7CiAgICBzb25nTGlzdHM6IGZ1bmN0aW9uIHNvbmdMaXN0cyh2YWwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh2YWwubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLmxpc3QubGVuZ3RoID0gMDsKICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvciA9IGZhbHNlOwogICAgICAgIHZhciBhcnIgPSB2YWwuc2xpY2UoMCwgdGhpcy5tYXggfHwgMTApOwogICAgICAgIHRoaXMubGlzdC5sZW5ndGggPSAwOwoKICAgICAgICBpZiAodmFsWzBdLnNvbmcpIHsKICAgICAgICAgIGFyci5tYXAoZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgICAgdmFyIG9iaiA9IGxpc3Quc29uZzsKCiAgICAgICAgICAgIF90aGlzLmxpc3QucHVzaChvYmopOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubGlzdCA9IGFycjsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyhbJ2N1cnJlbnRTb25nJywgJ3NvbmdzTGlzdCddKSksIHt9LCB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB0aGlzLnBsYXlTdGF0dXMgJiYgdGhpcy5nZXRQbGF5U3RhdHVzKGZhbHNlKTsKICAgIH0sCiAgICAvLyDlpITnkIbluo/lj7cKICAgIGhhbmRsZU51bTogZnVuY3Rpb24gaGFuZGxlTnVtKG51bSkgewogICAgICBudW0rKzsKICAgICAgcmV0dXJuIG51bSA8IDEwID8gJzAnICsgbnVtIDogbnVtOwogICAgfSwKICAgIC8vIOW8gOWQr+aSreaUvue7hOS7tgogICAgc2hvd1BsYXllcjogZnVuY3Rpb24gc2hvd1BsYXllcihpZCwgYWxpZCwgaW5kZXgpIHsKICAgICAgdmFyIHNvbmdMaXN0ID0gdGhpcy51dGlscy5zdG9yZUlkKHRoaXMubGlzdCk7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIGFsaWQ6IGFsaWQsCiAgICAgICAgaW5kZXg6IGluZGV4CiAgICAgIH07CiAgICAgIHRoaXMuZ2V0U29uZ0lkKGlkKTsKICAgICAgdGhpcy5jdXJyZW50U29uZyhvYmopOwogICAgICB0aGlzLnNvbmdzTGlzdChzb25nTGlzdCk7CgogICAgICBpZiAodGhpcy5wbGF5U3RhdHVzKSB7CiAgICAgICAgdGhpcy5hdWRpby5wYXVzZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGxheWluZyAmJiB0aGlzLmF1ZGlvLnBsYXkoKTsKICAgICAgfQoKICAgICAgdGhpcy5nZXRQbGF5U3RhdHVzKCF0aGlzLnBsYXlTdGF0dXMpOwogICAgfSwKICAgIC8vIOWKoOi9veabtOWkmuatjOabsgogICAgbG9hZFNvbmc6IGZ1bmN0aW9uIGxvYWRTb25nKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBsZW4gPSB0aGlzLmxpc3QubGVuZ3RoOwogICAgICB0aGlzLm1heCA9IGxlbiArIDEwOwoKICAgICAgaWYgKHRoaXMuc29uZ0xpc3RzWzBdLnNvbmcpIHsKICAgICAgICB2YXIgYXJyID0gdGhpcy5zb25nTGlzdHMuc2xpY2UobGVuLCB0aGlzLm1heCk7CiAgICAgICAgYXJyLm1hcChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgdmFyIG9iaiA9IGxpc3Quc29uZzsKCiAgICAgICAgICBfdGhpczIubGlzdC5wdXNoKG9iaik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5saXN0ID0gdGhpcy5zb25nTGlzdHMuc2xpY2UoMCwgdGhpcy5tYXgpOwogICAgICB9CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"song-list\" \r\n    v-loading=\"false\"\r\n    :data=\"list\"\r\n    element-loading-text=\"拼命加载中\"\r\n    element-loading-background=\"#fff\"\r\n  >\r\n    <div class=\"song-box\">\r\n      <div class=\"title\">\r\n        <div class=\"index\">序号</div>\r\n        <div class=\"name\">歌曲</div>\r\n        <div class=\"artist\">歌手</div>\r\n        <div class=\"album\">专辑</div>\r\n        <div class=\"duration\">时长</div>\r\n      </div>\r\n      <div \r\n        :class=\"songId == item.id ? \r\n                playStatus ? \r\n                'item is-active' : 'item' : 'item' \"\r\n        v-for=\"(item,index) in list\" \r\n        :key=\"item.id\" \r\n        ref=\"list\"\r\n        @click=\"showPlayer(item.id,item.al.id,index)\"\r\n      >\r\n        <div class=\"index\">\r\n          <span class=\"num\">{{ handleNum(index)}}</span>\r\n          <i class=\"iconfont icon-bofang\" ref=\"icon\"></i>\r\n          <div class=\"play-animation\">\r\n            <span></span>\r\n            <span></span>\r\n            <span></span>\r\n            <span></span>\r\n            <span></span>\r\n          </div>\r\n        </div>\r\n        <div class=\"name\">\r\n          <div class=\"cover\">\r\n            <el-image \r\n              :src=\"item.al.picUrl\" \r\n              fit=\"fill\"\r\n              v-if=\"item.al\"></el-image>\r\n          </div>\r\n          <div class=\"song-name ellipsis\">\r\n            {{ item.name }}\r\n          </div>\r\n        </div>\r\n        <div class=\"artist\">\r\n          <div class=\"wrapper ellipsis\">\r\n            <span>{{ utils.getSinger(item.ar)}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"album\">\r\n          <div class=\"wrapper ellipsis\">\r\n            <span v-if=\"item.al\">{{ item.al.name }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"duration\">\r\n          <div class=\"wrapper\">\r\n            <span>{{ utils.formatTime(item.dt) }}</span>  \r\n          </div>  \r\n        </div>  \r\n      </div>\r\n    </div>\r\n    <div \r\n      class=\"load-more\" \r\n      v-show=\"!error\"\r\n    >\r\n      <div class=\"more\">\r\n        <span @click=\"loadSong\">查看更多</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"error\" v-show=\"error\">\r\n      <span>暂时没有播放数据噢~</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters,mapActions,mapState} from 'vuex'\r\nexport default {\r\n  props: {\r\n    songLists: {\r\n      type: Array,\r\n      required: true,\r\n    }\r\n  },\r\n  data(){\r\n    return{\r\n      list: [],\r\n      loading: false,\r\n      error: false,\r\n      max: 0,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['audio','playStatus','playing','songId']),\r\n    ...mapGetters(['getSongId','getCurrentSong','getPlayStatus']),\r\n\r\n  },\r\n  watch: {\r\n    songLists(val){\r\n      if(val.length == 0){\r\n        this.list.length = 0;\r\n        this.error = true;\r\n        return ;\r\n      }else{\r\n        this.error = false;\r\n        let arr = val.slice(0,this.max || 10);\r\n        this.list.length = 0;\r\n        if(val[0].song){\r\n          arr.map(list => {\r\n            let obj = list.song;\r\n            this.list.push(obj)\r\n          })\r\n        }else{\r\n          this.list = arr\r\n        }\r\n      }\r\n      \r\n    },\r\n  },\r\n  mounted(){\r\n    this.init();\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'currentSong',\r\n      'songsList',\r\n    ]),\r\n    \r\n    init(){\r\n      this.playStatus && this.getPlayStatus(false);\r\n    },\r\n\r\n    // 处理序号\r\n    handleNum(num){\r\n      num++;\r\n      return num < 10 ? '0' + num : num\r\n    },\r\n\r\n    // 开启播放组件\r\n    showPlayer(id,alid,index){\r\n        let songList = this.utils.storeId(this.list)\r\n        let obj = {\r\n          id,\r\n          alid,\r\n          index,\r\n        }\r\n        this.getSongId(id)\r\n        this.currentSong(obj)\r\n        this.songsList(songList);\r\n          if(this.playStatus){\r\n            this.audio.pause();\r\n          }\r\n          else{\r\n            this.playing &&\r\n            this.audio.play();\r\n          }\r\n          this.getPlayStatus(!this.playStatus)\r\n    },\r\n\r\n    // 加载更多歌曲\r\n    loadSong(){ \r\n      let len = this.list.length;\r\n      this.max = len + 10;\r\n      if(this.songLists[0].song){\r\n        let arr = this.songLists.slice(len,this.max);\r\n        arr.map(list => {\r\n          let obj = list.song;\r\n          this.list.push(obj);\r\n        })\r\n      }else{\r\n        this.list = this.songLists.slice(0,this.max);\r\n      }\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped> \r\n  .song-box{\r\n    user-select: none;\r\n    &>div{\r\n      padding: 0 9px;\r\n      display: flex;\r\n      height: 50px;\r\n      line-height: 50px;\r\n      font-size: 14px;\r\n      &>div{\r\n        padding: 0 9px;\r\n        display: flex;\r\n        width: 100%;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n      .index{\r\n        display: inline-block;\r\n        width: 10%;\r\n        text-align: center;\r\n        i{\r\n          display: none;\r\n          color: $mainColor;\r\n        }\r\n      }\r\n      .name{\r\n        align-items: center;\r\n        width: 40%;\r\n        .cover{\r\n          margin-right: 10px;\r\n          width: 35px;\r\n          height: 35px;\r\n          border-radius: 5px;\r\n        }\r\n        .song-name{\r\n          width: 150px;\r\n        }\r\n      }\r\n      .artist{\r\n        width: 25%;\r\n      }\r\n      .album{\r\n        width: 15%;\r\n      }\r\n      .duration{\r\n        padding-right: 40px;\r\n        display: inline-block;\r\n        width: 15%;\r\n        text-align: right;\r\n      }\r\n\r\n      &.title{\r\n        text-align: left;\r\n        font-weight: 300;\r\n        background: #fafafa; \r\n        color: #999;\r\n        div{\r\n          display: inline-block;\r\n        }\r\n      }\r\n      &.item{\r\n        justify-content: center;\r\n        align-items: center;\r\n        transition: all .5s ease;  \r\n        cursor: pointer;\r\n        .play-animation{\r\n          margin-right: 0;\r\n          display: none;\r\n          height: 16px;\r\n          min-width: 18px;\r\n          justify-content: center;\r\n          overflow: hidden;\r\n          span{\r\n            animation: fly 2s infinite linear;\r\n            width: 2px;\r\n            height: 100%;\r\n            margin-left: 2px;\r\n            background: #fa2800;\r\n            &:nth-child(1) { animation-delay: -1s }\r\n            &:nth-child(3) { animation-delay: -1.5s }\r\n            &:nth-child(4) { animation-delay: -0.9s }\r\n            &:nth-child(5) { animation-delay: -0.6s }\r\n          }\r\n        }\r\n        &:hover{\r\n          background: #e8e9ed;\r\n          .index{\r\n            span{\r\n              display: none;\r\n            }\r\n            i{\r\n              display: block;\r\n            }\r\n          }\r\n        }\r\n        &:nth-child(odd){\r\n          background: #f7f7f7;\r\n        }\r\n        &.is-active{\r\n          .index{\r\n            span{\r\n              display: none;\r\n            }\r\n            .play-animation{\r\n              display: flex;\r\n              span{\r\n                display: block;\r\n              }\r\n            }\r\n          }\r\n          \r\n        }\r\n        &.is-active:hover{\r\n          .play-animation{\r\n            display: none;\r\n          }\r\n        }\r\n      }\r\n\r\n    } \r\n  }\r\n  .load-more{\r\n    margin-top: 20px;\r\n    .more{\r\n      @include flex;\r\n      padding: 10px;\r\n      span{\r\n        transform: translateX(-20px);\r\n        cursor: pointer;\r\n        &:hover{\r\n          color: $mainColor;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .error{\r\n      @include flex;\r\n      margin-top: 20px;\r\n  }\r\n  \r\n</style>"],"sourceRoot":"src/components/common/song-list"}]}