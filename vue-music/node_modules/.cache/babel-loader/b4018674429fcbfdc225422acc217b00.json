{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\src\\common\\cache.js","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\src\\common\\cache.js","mtime":1600536934716},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\新建文件夹\\desktop-nicemusic\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHN0b3JhZ2UgZnJvbSAnZ29vZC1zdG9yYWdlJzsKdmFyIFNFQVJDSF9LRVkgPSAnX19zZWFyY2hfXyc7CnZhciBTRUFSQ0hfTUFYID0gMTU7CnZhciBISVNUT1JZX0tFWSA9ICdfX2hpc3RvcnlfXyc7CnZhciBISVNUT1JZX01BWF9MRU5HVEggPSA1MDsgLy8g5o+S5YWlCgpmdW5jdGlvbiBpbnNlcnRBcnJheShhcnIsIHZhbCwgY29tcGFyZSwgbWF4TGVuKSB7CiAgdmFyIGluZGV4ID0gYXJyLmZpbmRJbmRleChjb21wYXJlKTsKCiAgaWYgKGluZGV4ID09PSAwKSB7CiAgICByZXR1cm47CiAgfQoKICBpZiAoaW5kZXggPiAwKSB7CiAgICBhcnIuc3BsaWNlKGluZGV4LCAxKTsKICB9CgogIGFyci51bnNoaWZ0KHZhbCk7CgogIGlmIChtYXhMZW4gJiYgYXJyLmxlbmd0aCA+IG1heExlbikgewogICAgYXJyLnBvcCgpOwogIH0KfSAvLyDliKDpmaQKCgpmdW5jdGlvbiBkZWxldGVGcm9tQXJyYXkoYXJyLCBjb21wYXJlKSB7CiAgdmFyIGluZGV4ID0gYXJyLmZpbmRJbmRleChjb21wYXJlKTsKCiAgaWYgKGluZGV4ID4gLTEpIHsKICAgIGFyci5zcGxpY2UoaW5kZXgsIDEpOwogIH0KfSAvLyDlrZjlgqjljoblj7LmkJzntKLmlbDmja4KCgpleHBvcnQgZnVuY3Rpb24gc2F2ZVNlYXJjaChxdWVyeSkgewogIHZhciBzZWFyY2hlcyA9IHN0b3JhZ2UuZ2V0KFNFQVJDSF9LRVksIFtdKTsKICBpbnNlcnRBcnJheShzZWFyY2hlcywgcXVlcnksIGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbSA9PT0gcXVlcnk7CiAgfSwgU0VBUkNIX01BWCk7CiAgc3RvcmFnZS5zZXQoU0VBUkNIX0tFWSwgc2VhcmNoZXMpOwogIHJldHVybiBzZWFyY2hlczsKfSAvLyDor7vlj5bljoblj7LmkJzntKLmlbDmja4KCmV4cG9ydCBmdW5jdGlvbiBnZXRTZWFyY2goKSB7CiAgcmV0dXJuIHN0b3JhZ2UuZ2V0KFNFQVJDSF9LRVksIFtdKTsKfSAvLyDliKDpmaTljZXkuKrmkJzntKLljoblj7IKCmV4cG9ydCBmdW5jdGlvbiBkZWxldGVTZWFyY2gocXVlcnkpIHsKICB2YXIgc2VhcmNoZXMgPSBzdG9yYWdlLmdldChTRUFSQ0hfS0VZLCBbXSk7CiAgZGVsZXRlRnJvbUFycmF5KHNlYXJjaGVzLCBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0gPT09IHF1ZXJ5OwogIH0pOwogIHN0b3JhZ2Uuc2V0KFNFQVJDSF9LRVksIHNlYXJjaGVzKTsKICByZXR1cm4gc2VhcmNoZXM7Cn0gLy8g5riF56m65pCc57Si5Y6G5Y+yCgpleHBvcnQgZnVuY3Rpb24gY2xlYXJTZWFyY2goKSB7CiAgc3RvcmFnZS5yZW1vdmUoU0VBUkNIX0tFWSk7CiAgcmV0dXJuIFtdOwp9IC8vIOa3u+WKoOacgOi/keaSreaUvuWIl+ihqAoKZXhwb3J0IGZ1bmN0aW9uIHNhdmVIaXN0b3J5KHNvbmcpIHsKICB2YXIgc29uZ3MgPSBzdG9yYWdlLmdldChISVNUT1JZX0tFWSwgW10pOwogIGluc2VydEFycmF5KHNvbmdzLCBzb25nLCBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIHNvbmcuaWQgPT09IGl0ZW0uaWQ7CiAgfSwgSElTVE9SWV9NQVhfTEVOR1RIKTsKICBzdG9yYWdlLnNldChISVNUT1JZX0tFWSwgc29uZ3MpOwogIHJldHVybiBzb25nczsKfSAvLyDnp7vpmaTmnIDov5Hmkq3mlL7liJfooagKCmV4cG9ydCBmdW5jdGlvbiBkZWxldGVIaXN0b3J5KHNvbmcpIHsKICB2YXIgc29uZ3MgPSBzdG9yYWdlLmdldChISVNUT1JZX0tFWSwgW10pOwogIGRlbGV0ZUZyb21BcnJheShzb25ncywgZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBzb25nLmlkID09PSBpdGVtLmlkOwogIH0pOwogIHN0b3JhZ2Uuc2V0KEhJU1RPUllfS0VZLCBzb25ncyk7CiAgcmV0dXJuIHNvbmdzOwp9IC8vIOa4heepuuacgOi/keaSreaUvuWIl+ihqAoKZXhwb3J0IGZ1bmN0aW9uIGNsZWFySGlzdG9yeSgpIHsKICBzdG9yYWdlLnJlbW92ZShISVNUT1JZX0tFWSk7CiAgcmV0dXJuIFtdOwp9"},{"version":3,"sources":["C:/Users/zlw12/Desktop/新建文件夹/desktop-nicemusic/src/common/cache.js"],"names":["storage","SEARCH_KEY","SEARCH_MAX","HISTORY_KEY","HISTORY_MAX_LENGTH","insertArray","arr","val","compare","maxLen","index","findIndex","splice","unshift","length","pop","deleteFromArray","saveSearch","query","searches","get","item","set","getSearch","deleteSearch","clearSearch","remove","saveHistory","song","songs","id","deleteHistory","clearHistory"],"mappings":"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","sourcesContent":["import storage from 'good-storage'\r\n\r\nconst SEARCH_KEY = '__search__'\r\nconst SEARCH_MAX = 15\r\n\r\nconst HISTORY_KEY = '__history__'\r\nconst HISTORY_MAX_LENGTH = 50\r\n\r\n// 插入\r\nfunction insertArray(arr, val, compare, maxLen) {\r\n  const index = arr.findIndex(compare)\r\n  if (index === 0) {\r\n    return\r\n  }\r\n  if(index > 0) {\r\n    arr.splice(index, 1)\r\n  }\r\n  arr.unshift(val)\r\n  if(maxLen && arr.length > maxLen) {\r\n    arr.pop()\r\n  }\r\n}\r\n\r\n// 删除\r\nfunction deleteFromArray(arr, compare) {\r\n  const index = arr.findIndex(compare)\r\n  if (index > -1) {\r\n    arr.splice(index, 1)\r\n  }\r\n}\r\n\r\n// 存储历史搜索数据\r\nexport function saveSearch(query) {\r\n  let searches = storage.get(SEARCH_KEY, [])\r\n  insertArray(searches, query, item => {\r\n    return item === query\r\n  }, SEARCH_MAX)\r\n  storage.set(SEARCH_KEY, searches)\r\n  return searches\r\n}\r\n\r\n// 读取历史搜索数据\r\nexport function getSearch() {\r\n  return storage.get(SEARCH_KEY, [])\r\n}\r\n\r\n// 删除单个搜索历史\r\nexport function deleteSearch(query) {\r\n  let searches = storage.get(SEARCH_KEY, [])\r\n  deleteFromArray(searches, item => {\r\n    return item === query\r\n  })\r\n  storage.set(SEARCH_KEY, searches)\r\n  return searches\r\n}\r\n\r\n// 清空搜索历史\r\nexport function clearSearch() {\r\n  storage.remove(SEARCH_KEY)\r\n  return []\r\n}\r\n\r\n// 添加最近播放列表\r\nexport function saveHistory(song) {\r\n  let songs = storage.get(HISTORY_KEY, [])\r\n  insertArray(songs, song, (item) => {\r\n    return song.id === item.id\r\n  }, HISTORY_MAX_LENGTH)\r\n  storage.set(HISTORY_KEY, songs)\r\n  return songs\r\n}\r\n\r\n// 移除最近播放列表\r\nexport function deleteHistory(song) {\r\n  let songs = storage.get(HISTORY_KEY, [])\r\n  deleteFromArray(songs, (item) => {\r\n    return song.id === item.id\r\n  })\r\n  storage.set(HISTORY_KEY, songs)\r\n  return songs\r\n}\r\n\r\n// 清空最近播放列表\r\nexport function clearHistory() {\r\n  storage.remove(HISTORY_KEY)\r\n  return []\r\n}"]}]}