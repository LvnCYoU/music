{"remainingRequest":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\comment\\comment-playlist\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\src\\components\\common\\comment\\comment-playlist\\index.vue","mtime":1604658837907},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\zlw12\\Desktop\\store\\vue-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy96bHcxMi9EZXNrdG9wL3N0b3JlL3Z1ZS1tdXNpYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29tbWVudDogW10sCiAgICAgIGZsYWc6IHRydWUsCiAgICAgIGRhdGE6IHt9LAogICAgICBvcmRlcjogJ+acgOeDrScKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB0aGlzLmdldENvbW1lbnRQbGF5bGlzdCgpOwogICAgfSwKICAgIC8vIOiOt+WPluivhOiuuuaVsOaNrgogICAgZ2V0Q29tbWVudFBsYXlsaXN0OiBmdW5jdGlvbiBnZXRDb21tZW50UGxheWxpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBpZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZCA9IF90aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRhcGkuQ29tbWVudFBsYXlsaXN0KGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgICBfdGhpcy5jb21tZW50ID0gcmVzLmRhdGEuaG90Q29tbWVudHM7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOivhOiuuui9rOWPmCDmnIDmlrAv5pyA54OtCiAgICBjaGFuZ2VDb21tZW50OiBmdW5jdGlvbiBjaGFuZ2VDb21tZW50KGZsYWcpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgbWFwID0gbmV3IE1hcChbWydmYWxzZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuY29tbWVudCA9IF90aGlzMi5kYXRhLmNvbW1lbnRzOwogICAgICB9XSwgWyd0cnVlJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5jb21tZW50ID0gX3RoaXMyLmRhdGEuaG90Q29tbWVudHM7CiAgICAgIH1dLCBbJ2RlZmF1bHQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9XV0pOwogICAgICBpZiAodGhpcy5mbGFnID09IGZsYWcpIHJldHVybjsKICAgICAgdGhpcy5mbGFnID0gZmxhZzsKICAgICAgcmV0dXJuIG1hcC5nZXQoIiIuY29uY2F0KHRoaXMuZmxhZykpLmNhbGwodGhpcykgfHwgbWFwLmdldCgnZGVmYXVsdCcpLmNhbGwodGhpcyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,IAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA;AAJA,KAAA;AAMA,GARA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,IAAA;AACA,GAZA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,WAAA,kBAAA;AACA,KAHA;AAKA;AACA,IAAA,kBANA,gCAMA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,EADA,GACA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,EADA;AAAA;AAAA,uBAEA,KAAA,CAAA,IAAA,CAAA,eAAA,CAAA,EAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,kBAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA;AACA,kBAAA,KAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA,CAAA,WAAA;AACA,iBAJA,CAFA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KAdA;AAgBA;AACA,IAAA,aAjBA,yBAiBA,IAjBA,EAiBA;AAAA;;AACA,UAAA,GAAA,GAAA,IAAA,GAAA,CAAA,CACA,CAAA,OAAA,EAAA,YAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,MAAA,CAAA,IAAA,CAAA,QAAA;AACA,OAFA,CADA,EAIA,CAAA,MAAA,EAAA,YAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,MAAA,CAAA,IAAA,CAAA,WAAA;AACA,OAFA,CAJA,EAOA,CAAA,SAAA,EAAA,YAAA;AAAA;AAAA,OAAA,CAPA,CAAA,CAAA;AASA,UAAA,KAAA,IAAA,IAAA,IAAA,EAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,aAAA,GAAA,CAAA,GAAA,WAAA,KAAA,IAAA,GAAA,IAAA,CAAA,IAAA,KACA,GAAA,CAAA,GAAA,CAAA,SAAA,EAAA,IAAA,CAAA,IAAA,CADA;AAEA;AA/BA;AAdA,CAAA","sourcesContent":["<template>\r\n  <div class=\"comment-playlist shadow\">\r\n    <header class=\"title\">\r\n      <span>精彩评论</span>\r\n      <div class=\"btn\">\r\n        <span \r\n          :class=\"flag ? 'is-active' : ''\"\r\n          @click=\"changeComment(true)\"\r\n        >\r\n          最热\r\n        </span>\r\n        <span \r\n          :class=\"flag ? '' : 'is-active'\"\r\n          @click=\"changeComment(false)\"\r\n        >\r\n          最新\r\n        </span>\r\n      </div>\r\n    </header>\r\n    <ul>\r\n      <li \r\n        class=\"item\" \r\n        v-for=\"item in comment\" \r\n        :key=\"item.commentId\"\r\n      > \r\n        <div class=\"cover\">\r\n          <el-image \r\n            :src=\"item.user.avatarUrl\" \r\n            fit=\"fill\"\r\n            v-if=\"item.user.avatarUrl\"\r\n          >\r\n          </el-image>\r\n        </div>\r\n        <div class=\"info\">\r\n          <h2 class=\"name\" v-if=\"item.user.nickname\">\r\n            <span>{{ item.user.nickname }}</span>\r\n            <small class=\"time\"> . {{ utils.getMonth(item.time) }}</small>\r\n          </h2>\r\n          <div class=\"content\">\r\n            <p>{{ item.content }}</p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <div class=\"error\" v-if=\"!comment.length\">\r\n        <span>暂没有评论噢~</span>\r\n      </div>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return{\r\n      comment: [],\r\n      flag: true,\r\n      data: {},\r\n      order: '最热'\r\n    }\r\n  },\r\n\r\n  mounted(){\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    init(){\r\n      this.getCommentPlaylist();\r\n    },\r\n\r\n    // 获取评论数据\r\n    async getCommentPlaylist(){\r\n      let id = this.$route.query.id;\r\n      await  this.$api.CommentPlaylist(id)\r\n        .then(res => {\r\n          this.data = res.data;\r\n          this.comment = res.data.hotComments\r\n        })\r\n      \r\n    },\r\n\r\n    // 评论转变 最新/最热\r\n    changeComment(flag){\r\n      let map = new Map([\r\n        ['false', () => {\r\n          this.comment = this.data.comments\r\n        }],\r\n        ['true', () => {\r\n          this.comment = this.data.hotComments\r\n        }],\r\n        ['default', () => { return }]\r\n      ])\r\n      if(this.flag == flag) return;\r\n      this.flag = flag;\r\n      return map.get(`${this.flag}`).call(this) ||\r\n             map.get('default').call(this)\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .comment-playlist{\r\n    margin-bottom: 20px;\r\n    padding: 15px;\r\n    border-radius: 8px;\r\n    box-sizing: border-box;\r\n    .title{\r\n      padding-left: 1rem;\r\n      margin-bottom: 15px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      height: 20px;\r\n      border-left: 3px solid #fa2800;\r\n      font-weight: 700;\r\n      font-size: 14px;\r\n      .btn{\r\n        cursor: pointer;\r\n        .is-active{\r\n          color: $mainColor;\r\n        }\r\n        span{\r\n          padding: 0 5px;\r\n          &:last-child{\r\n            padding-left: 6px;\r\n            border-left: 1px solid #4a4a4a;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    ul{\r\n      .item{\r\n        padding: 10px 0;\r\n        display: flex;\r\n        .cover{\r\n          margin-right: 12px;\r\n          width: 45px;\r\n          height: 45px;\r\n          border-radius: 50%;\r\n          flex-shrink: 0;\r\n          cursor: pointer;\r\n          .el-image{\r\n            border-radius: 50%;\r\n          }\r\n        }\r\n        .info{\r\n          &>div{\r\n            box-sizing: border-box;\r\n          }\r\n          .name{\r\n            margin-right: 5px;\r\n            margin-bottom: 10px;\r\n            font-size: 15px;\r\n            cursor: pointer;\r\n            small{\r\n              font-size: 12px;\r\n              color: #a5a5c1;\r\n              font-weight: 200;\r\n            }\r\n          }\r\n          .content{\r\n            margin-top: 5px;\r\n            padding: 5px 10px;\r\n            width: 100%;\r\n            line-height: 1.6;\r\n            color: #666;\r\n            background: #f5f5f5;\r\n            border-radius: 3px;\r\n            font-size: 12px;\r\n          }\r\n        }\r\n      }\r\n      .error{\r\n        margin-top: 50px;\r\n        font-size: 14px;\r\n        text-align: center;\r\n      }\r\n    }\r\n  }\r\n</style>"],"sourceRoot":"src/components/common/comment/comment-playlist"}]}